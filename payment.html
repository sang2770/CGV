

<!DOCTYPE html>

<!--[if lt IE 7 ]> <html lang="vi" id="top" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="vi" id="top" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="vi" id="top" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="vi" id="top" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="vi" id="top" class="no-js"> <!--<![endif]-->

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Thanh toán</title>
<meta name="keywords" content="cgv, cgv cinemas vietnam, rap chieu phim, lich chieu, phim moi nhat, trailer phim, phim sap chieu" />
<meta name="title" content="Thanh toán" />
<meta name="description" content="Trải nghiệm điện ảnh chất lượng nhất tại cụm rạp CGV trên toàn quốc. Trang thông tin tổng hợp lịch chiếu, trailers phim mới nhất tại CGV Cinemas Việt Nam." />
<meta name="author" content="CGV Cinemas Vietnam"/>
<meta name="publisher" content="CGV Cinemas Vietnam"  />
<meta property="fb:app_id" content="1711898955707825" />
<meta property="fb:pages" content="395143205624" />
<meta property="og:site_name" content="Cgv.vn"  />
<meta property="og:type" content="website"/>
<meta property="og:title" content="Thanh toán" /><meta property="og:description" content="Trải nghiệm điện ảnh chất lượng nhất tại cụm rạp CGV trên toàn quốc. Trang thông tin tổng hợp lịch chiếu, trailers phim mới nhất tại CGV Cinemas Việt Nam." /><meta property="og:image" itemprop="thumbnailUrl" content="https://www.cgv.vn/media/wysiwyg/2024/rsz_thumb_cgv.jpg"><meta property="og:image:secure" content="https://www.cgv.vn/media/wysiwyg/2024/rsz_thumb_cgv.jpg"/><meta property="og:image:width" content="500"/><meta property="og:image:height" content="283"/><link rel="canonical" href="https://www.cgv.vn/default/cinox/sales/payment/" />
<meta name="robots" content="INDEX,FOLLOW" />
<meta name="google-site-verification" content="UEWWiNkGp-8XEvn-Ya15ciNeBKn3WECih18dJ5ZRUlY" />
<link rel="shortcut icon" href="https://www.cgv.vn/media/favicon/default/cgvcinemas-vietnam-favicon.ico" type="image/x-icon" />
<!--[if lt IE 7]>
<script type="text/javascript">
//<![CDATA[
    var BLANK_URL = 'https://www.cgv.vn/js/blank.html';
    var BLANK_IMG = 'https://www.cgv.vn/js/spacer.gif';
//]]>
</script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="https://www.cgv.vn/skin/frontend/base/default/aw_blog/css/style.css" media="all" />
<script type="text/javascript" src="https://www.cgv.vn/js/prototype/prototype.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/js/lib/jquery/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/js/lib/jquery/noconflict.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/js/lib/ccard.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/js/prototype/validation.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/js/scriptaculous/builder.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/js/scriptaculous/effects.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/js/scriptaculous/dragdrop.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/js/scriptaculous/controls.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/js/scriptaculous/slider.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/js/varien/js.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/js/varien/form.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/js/mage/translate.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/js/mage/cookies.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/js/google/ga.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/js/varien/weee.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/default/js/lib/modernizr.custom.min.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/default/js/lib/selectivizr.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/default/js/lib/matchMedia.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/default/js/lib/matchMedia.addListener.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/default/js/lib/enquire.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/default/js/cgv.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/default/js/app.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/default/js/lib/jquery.cycle2.min.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/default/js/lib/jquery.cycle2.swipe.min.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/default/js/lib/jquery.cycle2.carousel.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/default/js/slideshow.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/default/js/lib/imagesloaded.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/enterprise/js/scripts.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/default/js/minicart.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/default/js/jquery.colorbox.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/default/js/swiper-bundle.min.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/enterprise/js/enterprise/catalogevent.js"></script>
<script type="text/javascript" src="https://www.cgv.vn/skin/frontend/cgv/enterprise/js/enterprise/wishlist.js"></script>
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Raleway:300,400,500,700,600" />
<link href="https://www.cgv.vn/default/newsoffer/rss/index/store_id/1/" title="Tin Khuyến Mãi Và Ưu Đãi Hấp Dẫn Tại CGV Cinemas Việt Nam" rel="alternate" type="application/rss+xml" />
<!--[if  (lte IE 8) & (!IEMobile)]>
<link rel="stylesheet" type="text/css" href="https://www.cgv.vn/skin/frontend/cgv/default/css/styles-ie8.css" media="all" />
<link rel="stylesheet" type="text/css" href="https://www.cgv.vn/skin/frontend/cgv/enterprise/css/enterprise-ie8.css" media="all" />
<link rel="stylesheet" type="text/css" href="https://www.cgv.vn/skin/frontend/cgv/default/css/madisonisland-ie8.css" media="all" />
<![endif]-->
<!--[if (gte IE 9) | (IEMobile)]><!-->
<link rel="stylesheet" type="text/css" href="https://www.cgv.vn/skin/frontend/cgv/enterprise/css/enterprise.css" media="all" />
<link rel="stylesheet" type="text/css" href="https://www.cgv.vn/skin/frontend/cgv/default/css/swiper-bundle.min.css" media="all" />
<link rel="stylesheet" type="text/css" href="https://www.cgv.vn/skin/frontend/cgv/default/css/styles.css" media="all" />
<link rel="stylesheet" type="text/css" href="https://www.cgv.vn/skin/frontend/cgv/default/css/colorbox.css" media="all" />
<link rel="stylesheet" type="text/css" href="https://www.cgv.vn/skin/frontend/cgv/default/css/madisonisland.css" media="all" />
<link rel="stylesheet" type="text/css" href="https://www.cgv.vn/skin/frontend/cgv/default/css/g-erp-cgv.css" media="all" />
<link rel="stylesheet" type="text/css" href="https://www.cgv.vn/skin/frontend/cgv/default/css/custom-cgv.css" media="all" />
<!--<![endif]-->

<script type="text/javascript">
//<![CDATA[
Mage.Cookies.path     = '/';
Mage.Cookies.domain   = '.cgv.vn';
//]]>
</script>
<meta name="viewport" content="initial-scale=1.0, width=device-width" />

<script type="text/javascript">
//<![CDATA[
optionalZipCountries = ["HK","IE","MO","PA"];
//]]>
</script>
<script type="text/javascript">//<![CDATA[
        var Translator = new Translate({"HTML tags are not allowed":"kh\u00f4ng ch\u1ea5p nh\u1eadn th\u1ebb HTML","Please select an option.":"Ph\u1ea3i ch\u1ecdn m\u1ed9t gi\u00e1 tr\u1ecb.","This is a required field.":"Ph\u1ea3i nh\u1eadp th\u00f4ng tin.","Please enter a valid email address. For example johndoe@domain.com.":"Vui l\u00f2ng nh\u1eadp \u0111\u00fang \u0111\u1ecba ch\u1ec9 email. V\u00ed d\u1ee5: johndoe@domain.com","Please enter 6 or more characters without leading or trailing spaces.":"Vui l\u00f2ng nh\u1eadp 6 k\u00fd t\u1ef1 tr\u1edf l\u00ean, kh\u00f4ng kho\u1ea3ng tr\u1eafng ho\u1eb7c d\u1ea5u c\u00e1ch d\u1eabn","Please make sure your passwords match.":"Vui l\u00f2ng \u0111\u1ea3m b\u1ea3o m\u1eadt kh\u1ea9u ph\u00f9 h\u1ee3p.","Please select one of the above options.":"Ph\u1ea3i ch\u1ecdn m\u1ed9t gi\u00e1 tr\u1ecb.","Please select one of the options.":"Ph\u1ea3i ch\u1ecdn m\u1ed9t gi\u00e1 tr\u1ecb.","This date is a required value.":"Ph\u1ea3i nh\u1eadp th\u00f4ng tin.","Please enter a valid full date":"Vui l\u00f2ng nh\u1eadp \u0111\u00fang \u0111\u1ecbnh d\u1ea1ng ng\u00e0y sinh","Complete":"Ho\u00e0n T\u1ea5t","Please specify shipping method.":"B\u1ea1n ph\u1ea3i ch\u1ecdn ph\u01b0\u01a1ng th\u1ee9c thanh to\u00e1n.","Please specify payment method.":"B\u1ea1n ph\u1ea3i ch\u1ecdn ph\u01b0\u01a1ng th\u1ee9c thanh to\u00e1n.","Add to Cart":"\u0110\u1eb7t mua","In Stock":"C\u00f2n h\u00e0ng","Out of Stock":"H\u1ebft h\u00e0ng","Save":"L\u01b0u l\u1ea1i","Cancel":"H\u1ee7y","Add to Wishlist":"L\u01b0u l\u1ea1i"});
        //]]></script><script>
function getMobileOperatingSystem() {
    var userAgent = navigator.userAgent || navigator.vendor || window.opera;
    // Windows Phone must come first because its UA also contains "Android"
    if (/windows phone/i.test(userAgent)){return "Windows Phone";}
    if (/android/i.test(userAgent)) {return "Android";}
    if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {return "iOS";}
    return "unknown";
}
var field = 'deeplink';
var dl_url = window.location.href;
var dl_now = new Date().valueOf();
if(dl_url.indexOf('?' + field + '=') != -1){
	var lastUrl='',append_src='';
	const queryString = window.location.search;
	const urlParams = new URLSearchParams(queryString);
	const cgvdl = urlParams.get('deeplink');
	if (dl_url.includes('?') && dl_url.includes('&')){
		append_src = queryString.slice(queryString.indexOf('&'));
	}
	const getPathFromUrl = dl_url.split("?")[0];
	lastUrl +=  getPathFromUrl+ '?source=web' + append_src;
	if(getMobileOperatingSystem()==='Android'){
	    setTimeout(function () {if (new Date().valueOf() - dl_now > 100) return; window.location = lastUrl; }, 10);
		window.location = atob(decodeURIComponent(cgvdl))+append_src;
	}else if(getMobileOperatingSystem()==='iOS'){
		setTimeout(function () { window.location = lastUrl; }, 10);
		window.location = atob(decodeURIComponent(cgvdl))+append_src;
	}
}
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-55803327-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MSDTZ2C');</script>
<!-- End Google Tag Manager -->

<!-- Viet tracking -->
<script src='//cdnt.netcoresmartech.com/smartechclient.js'></script> 
<script>smartech('create', 'ADGMOT35CHFLVDHBJNIG50K96A9NS1B3N9HRR3983R33HRONTL6G');smartech('register', 'd072e0b5f30e44990b34dec62fde4fe1');smartech('identify', 'nguyenvansang30102001@gmail.com');smartech('dispatch','Page Browse',{'url':"https://www.cgv.vn/default/cinox/sales/payment/"});</script> 

<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-messaging.js"></script></head>
<body class=" cinox-sales-payment">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MSDTZ2C"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
        <!-- BEGIN GOOGLE ANALYTICS CODE -->
    <script type="text/javascript">
        //<![CDATA[
        var _gaq = _gaq || [];
        
_gaq.push(['_setAccount', '55803327']);

_gaq.push(['_trackPageview']);
        
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
        //]]>
    </script>
    <!-- END GOOGLE ANALYTICS CODE -->
    
<div class="wrapper">
        <noscript>
        <div class="global-site-notice noscript">
            <div class="notice-inner">
                <p>
                    <strong>JavaScript seems to be disabled in your browser.</strong><br />
                    You must have JavaScript enabled in your browser to utilize the functionality of this website.                </p>
            </div>
        </div>
    </noscript>
    <div class="page">
        <div class="mtw_banner_top">
	    
	<div class="mtw_banner_top_content">
		<script type='text/javascript'>
			<!--//<![CDATA[
			   var m3_u = (location.protocol=='https:'?'https://advserver.cgv.vn/www/delivery/ajs.php':'http://advserver.cgv.vn/www/delivery/ajs.php');
			   var m3_r = Math.floor(Math.random()*99999999999);
			   if (!document.MAX_used) document.MAX_used = ',';
			   document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
			   document.write ("?zoneid=2");
			   document.write ('&amp;cb=' + m3_r);
			   if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
			   document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));
			   document.write ("&amp;loc=" + escape(window.location));
			   if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
			   if (document.context) document.write ("&context=" + escape(document.context));
			   if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
			   document.write ("'><\/scr"+"ipt>");
			//]]>-->
		</script><noscript><a href='http://advserver.cgv.vn/www/delivery/ck.php?n=a42fb781&amp;cb=INSERT_RANDOM_NUMBER_HERE' target='_blank'><img src='http://advserver.cgv.vn/www/delivery/avw.php?zoneid=2&amp;cb=INSERT_RANDOM_NUMBER_HERE&amp;n=a42fb781' border='0' alt='' /></a></noscript>
	</div>
	
	<script type='text/javascript'>
		<!--//<![CDATA[
			$j(document).ready(function(){
				$j(".mtw_banner_top_content").mouseup(function(){
					var src_data = $j(this).find('embed').attr('flashvars');				
					if(src_data){
						var url = src_data.split('=');
						window.open(decodeURIComponent(url[2]), '_blank');
					}
				});
			});
		//]]>-->
	</script>
</div>
<!--[if IE 8]>
    <style>
        .mtw_banner_left,.mtw_banner_right {
            display:none;
        }
    </style>
<![endif]-->
<div class="header-language-background">
	<div class="header-container">
		<div class="header-language-right">
			<!--div class="header-career mn-career">
				<p>
					<a href="https://www.cgv.vn/default/careers">
						Tuyển dụng					</a>
				</p>
			</div-->
			<div class="header-career mn-newsoffer">
				<p>
					<a href="https://www.cgv.vn/default/newsoffer">
						Tin mới & Ưu đãi					</a>
				</p>
			</div>
			
			<div class="header-career mn-myticket">
				<p>
					<a href="https://www.cgv.vn/default/sales/order/history/">
						Vé Của Tôi					</a>
				</p>
			</div>
			<div class="header-language-container">
				<div class="store-language-container">
					<div class="form-language">
    <ul id="select-language" title="Ngôn ngữ" onchange="window.location.href=this.value">
            		        <li value="https://www.cgv.vn/en/cinox/sales/payment/?___from_store=default"><a href="https://www.cgv.vn/en/cinox/sales/payment/?___from_store=default"><span>EN</span></a></li>
            		        <li value="https://www.cgv.vn/default/cinox/sales/payment/?___from_store=default"class="current" selected="selected"><span>VN</span></li>
        </ul>
</div>









				</div>
			</div>				
			<div class="header-top-account">			
				<div class="account-header-wrapper mn-login">
						<p class="logout-msg"><a href="https://www.cgv.vn/default/customer/account/" title="Tài khoản">Xin chào, sang nguyen!</a> <a href="https://www.cgv.vn/default/customer/account/logout/" title="Thoát">Thoát</a></p>
							</div>
			</div>			
		</div>
	</div>
</div>
<header id="header" class="page-header">
    <div class="page-header-container">
        <a class="logo" href="https://www.cgv.vn/default/">
            <img src="https://www.cgv.vn/skin/frontend/cgv/default/images/cgvlogo.png" alt="CGV Cinemas" class="large" />
            <img src="https://www.cgv.vn/skin/frontend/cgv/default/images/cgvlogo-small.png" alt="CGV Cinemas" class="small" />
        </a>
        <!-- Skip Links -->
        <div class="skip-links">
            <a href="#header-nav" class="skip-link skip-nav">
                <span class="icon"></span>
                <span class="label">Menu</span>
            </a>
			
            <a href="https://www.cgv.vn/default/sales/order/history/" class="skip-myticket">
                <span class="icon"></span>
            </a>
            <!--<a href="#header-search" class="skip-link skip-search">
                <span class="icon"></span>
                <span class="label">Tìm kiếm</span>
            </a>-->
            <div class="account-cart-wrapper">
                <a href="https://www.cgv.vn/default/customer/account/" data-target-element="#header-account" class="skip-link skip-account">
                    <span class="icon"></span>
                    <span class="label">Đăng nhập/ Đăng ký</span>
                </a>       
            </div>
        </div>
        <!-- Navigation -->
        <div id="header-nav" class="skip-content">
            	    <nav id="nav">
        <ol class="nav-primary">
			<li  class="level0 nav-1 first last parent"><a href="https://www.cgv.vn/default/movies.html" class="level0 has-children">Phim</a><ul class="level0"><li  class="level1 nav-1-1 first"><a href="https://www.cgv.vn/default/movies/now-showing.html" class="level1 ">Phim Đang Chiếu</a></li><li  class="level1 nav-1-2 last"><a href="https://www.cgv.vn/default/movies/coming-soon-1.html" class="level1 ">Phim Sắp Chiếu</a></li></ul></li>			
						<!--li class="level0 nav-2 first last">
				<a class="level0" href="https://www.cgv.vn/default/cinox/reserve/">Lịch Chiếu</a>
			</li-->
			
						<li class="level0 nav-2 parent first last">
				<a class="level0 has-children" href="javascript: void(0);">Rạp CGV</a>
				<ul class="level0">
					<li class="level1 nav-3-1 last">
						<a class="level1" href="https://www.cgv.vn/default/cinox/site/">Tất Cả Các Rạp</a>
					</li>
					<li class="level1 nav-3-2 last">
						<a class="level1" href="https://www.cgv.vn/default/theaters-special">Rạp Đặc Biệt</a>
					</li>	
					<li class="level1 nav-3-3 last">
						<a class="level1" href="https://www.cgv.vn/default/theaters/special/3d">Rạp 3D</a>
					</li>	
				</ul>
			</li>
			
						<li class="level0 nav-4 parent first last">
				<a class="level0 has-children" href="javascript: void(0);">Thành viên</a>
				<ul class="level0">
					<li class="level1 nav-4-2 first">
						<!--<a class="level0" href="https://www.cgv.vn/default/sales/order/history/">Thành viên</a>-->
						<a class="level1" href="https://www.cgv.vn/default/customer/account/login">Tài khoản CGV</a>
					</li>
					<li class="level1 nav-4-3 last">
						<a class="level1" href="https://www.cgv.vn/default/cgv-membership">Quyền lợi</a>
					</li>
				</ul>
			</li>
			
			<li class="level0 nav-5 parent first last">
				<a class="level0 has-children" href="javascript: void(0);">Cultureplex</a>
													<ul class="level0">
																<!--						<li class="level1 nav-5-1 ">
							<a class="level1" href=""></a>
						</li>
						-->
											<li class="level1 nav-5-1">
							<a class="level1" href="https://www.cgv.vn/default/online-store/movie-voucher.html">Quầy Online</a>
						</li>
						<li class="level1 nav-5-1">
							<a class="level1" href="https://www.cgv.vn/default/cinemas/sale">Thuê Rạp & Vé Nhóm</a>
						</li>
						<li class="level1 nav-5-1">
							<a class="level1" href="https://www.cgv.vn/default/cgv-online">e-CGV</a>
						</li>				
						<li class="level1 nav-5-1">
							<a class="level1" href="https://www.cgv.vn/default/gift">CGV eGift</a>
						</li>
						<li class="level1 nav-5-1">
							<a class="level1" href="https://www.cgv.vn/default/cgv-rules">CGV Rules</a>
						</li>
					</ul>
							</li>
        </ol>
    </nav>
	
<style type="text/css">
.nav-primary ul.level0 li a:hover{background:none}
.level1{text-transform: capitalize;}
</style>
<script type="text/javascript">
/*
	$j('.nav-1 a').each(function(){
		$j(this).attr('href', $j(this).attr('href').replace('cinox','www'));
	});
*/
	$j(document).ready(function(){
		//$j('li.level0.nav-1').find('a.has-children').replace('/movie.html','#');
		//$j('li.level0.nav-1 a.has-children').href.replace('/movie.html','#');
		$j('li.level0.nav-1 a.has-children').attr('href','#');
		$j('.categorypath-movie-voucher.category-movie-voucher li.category11 a,.categorypath-gift-card.category-gift-card li.category11 a').attr('href','#');
		//$j('li.level0.nav-1').find('a.has-children').replace('/movie.html','#');
	});
</script>
        </div>
        <!-- Search -->
        <div id="header-search" class="skip-content">
            
<div class="header-search-left">
	<p class="kenhcine"><a href="https://kenhcine.cgv.vn/" title="Kênh Cine - Tổng hợp tin tức điện ảnh mới nhất" target="_blank"><img alt="kênh Cine" src="https://iguov8nhvyobj.vcdn.cloud/media/wysiwyg/2019/AUG/kenhcine.gif"></a></p>
	
</div>

<div class="header-search-right">
	<p><a href="https://www.cgv.vn/default/movies/now-showing.html"><img alt="" src="https://iguov8nhvyobj.vcdn.cloud/media/wysiwyg/news-offers/mua-ve_ngay.png" /></a></p></div>




        </div>
        <!-- Account -->
		<div id="header-account" class="skip-content">
            <div class="links">
        <ul>
                                    <li class="first" ><a href="https://www.cgv.vn/default/customer/account/" title="Tài khoản" >Tài khoản</a></li>
                                                                                                <li ><a href="https://www.cgv.vn/default/checkout/cart/" title="Giỏ hàng (1)" class="top-link-cart">Giỏ hàng (1)</a></li>
                                                <li ><a href="https://www.cgv.vn/default/checkout/" title="Thanh toán" class="top-link-checkout">Thanh toán</a></li>
                                                <li class=" last" ><a href="https://www.cgv.vn/default/customer/account/logout/" title="Thoát" >Thoát</a></li>
                        </ul>
</div>
        </div>
    </div>
</header>
 
<script type="text/javascript">
    $j(document).ready(function(){
		if (sessionStorage.getItem('popupFragment') === 'true') {
            $j('.fragment').hide();
        } else {
            $j('.fragment').show();
        }
        $j('.fragment #fragmentClose').on('click', function(e) {
            $j('.fragment').remove();
            sessionStorage.setItem('popupFragment','true');
        });
	});
        
</script>
<style>
        #fragmentClose {
            position:fixed;
            bottom:90px; right:5px;
            display:block; background:url(/skin/frontend/cgv/default/images/icon_close.png) no-repeat top center;
            width:32px;
            height:32px;
            text-indent:-9999px;
            z-index: 9999;
            border: none;
        }
    </style>
<script type="text/javascript">
	$j('.nav-4-2').remove();
</script>
        <div class="main-container col1-layout">
			            <div class="main">            
                <div class="col-main">
                                        ﻿													
	<div class="page-title">
		<h1>Thanh toán</h1>
	</div>

	<div class="col2-set">
		<div class="col-1 width-70">
			<ol class="opc" id="checkoutSteps">
				<li id="opc-1" class="section">
					<div class="step-title">
						<h2><span class="class-step-payment">Bước 1: </span>Giảm giá</h2>
						<a href="#">Thay đổi</a><span class="cgv-reset" onclick="reset();">Đặt lại</span>
					</div>
					<div id="checkout-step-1" class="step a-item" style="display:none;">
						<dl class="checkout-discount-method" id="checkout-discount-method">
							<dt id="dt_method_1">
								CGV Voucher							</dt>
							
							<dd id="dd_method_1" style="display: none;">
								<div class="col2-set">
									<div class="col-1 width-50 padding-02">
										<div class="title">
											<label>Tên phim</label>
											<button type="button" class="button f-right" id="register-voucher" title="Đăng ký">
												Đăng ký											</button>
										</div>
										
										<div class="content">
																				</div>
									</div>
									
									<div class="col-2 width-50 padding-02">
										<div class="title">
											<label>Bắp Nước</label>
											<button type="button" class="button f-right" id="register_concessionvoucher" title="Đăng ký">
												Đăng ký											</button>
										</div>
										
										<div class="content">
																				</div>
									</div>
								</div>
							</dd>
							<dt id="dt_method_2">
								Mã giảm giá							</dt>
							
							<dd id="dd_method_2" style="display: none;">
								<div class="col2-set">
									<div class="col-1 width-50 padding-02">
										<div class="title">
											<label>Tên phim</label>
											<button type="button" class="button f-right" id="register-coupon" title="Đăng ký">
												Đăng ký											</button>
										</div>
										
										<div class="content">
																				</div>
									</div>
									
									<div class="col-2 width-50 padding-02">
										<div class="title">
											<label>Bắp Nước</label>
											<button type="button" class="button f-right" id="register-concessioncoupon" title="Đăng ký">
												Đăng ký											</button>
										</div>
										
										<div class="content">
																				</div>
									</div>
								</div>
							</dd>
							<dt id="dt_method_3">
								Điểm CGV							</dt>
							
							<dd id="dd_method_3" style="display: none;">
								<div class="col2-set">
									<div class="col-1 width-100 padding-02">
										<div class="content">
											<p>Bạn có: 0 P</p>
											<div class="input-box">												
												<input type="text" id="cgv:points" name="points" value="0" title="Points for use" class="input-text validate-digits custom-input points-input" />
												<button type="button" class="button points-button apply button-paymen-1" onclick="points(this)">
													Sử dụng												</button>
												
												<!--<input type="checkbox" class="useallvalue allpoints" onclick="allpoints(this);"> Sử dụng hết-->
											</div>
											<p class="discount-chose-points align-right">Giảm giá : <span class="price">0,00 ₫</span></p>
										</div>
									</div>
								</div>
							</dd>
														
							<dt id="dt_method_5">
								Đối tác							</dt>
							<dd id="dd_method_5" style="display: none;">
								<div class="col2-set">
									<div class="col-1 width-30 padding-02">
										<ol class="partnership-list products-list" id="partnership-list">
																																	
											
																					
																																																																																								<li id="partnership-hsbc" onclick="chosepartner('partnership-hsbc',this);">Vietbank</li>
																																	
																																	
																																																																																																																																																																																				
																																													
																																																																																																																																																																																																																																																																																																																																		
																																																																																			
																																		
																																																																																				<li id="partnership-hsbcv1" onclick="chosepartner('partnership-hsbcv1',this);">URBOX - HOMECREDIT</li>
																																																<li id="partnership-cimb" onclick="chosepartner('partnership-cimb',this);">URBOX - MSB</li>
																																																																								<li id="partnership-hsbcplatinum" onclick="chosepartner('partnership-hsbcplatinum',this);">KBank Card</li>
																																	</ol>
									</div>
									
									<div class="col-2 width-70 padding-02 border-left">
										<ol class="partnership-view-list" id="partnership-view-list">
																						
																																																							<li class="partnership-hsbc partnership-item">
												<div class="title">
													<input type="hidden" name="partner[hsbc]" value="20009304" onclick="partner(this);">
													<label>Mua 02 vé 2D bằng Thẻ Vietbank MasterCard giá 99K</label>
													<button type="button" class="button" onclick="partner('hsbc',this);">Sử dụng</button>
												</div>
												<div class="content cls-hsbc">
													<p>VIETBANK: "Mua 02 vé xem phim 2D bằng Thẻ Vietbank MasterCard tại CGV với giá 99.000 đồng"
1/ Thời gian ưu đãi:
- Áp dụng Từ Thứ Hai đến Chủ Nhật từ 10/05/2024 đến 09/11/2024 KHÔNG bao gồm các suất chiếu ngày lễ tết.

2/ Nội dung ưu đãi:
- Mua 02 vé xem phim 2D bằng Thẻ Vietbank MasterCard tại CGV với giá 99.000 đồng trực tuyến trên ứng dụng CGV Cinema hoặc Website www.cgv.vn vào tất cả các ngày trong tuần.
- Mỗi chủ thẻ hợp lệ chỉ được hưởng 01 ưu đãi/ngày.
- Đầu BIN được áp dụng ưu đãi: 52419012, 52419050, 52143049
- Chương trình chỉ áp dụng cho hạng ghế thường và hạng ghế VIP cho phim 2D. 
- Chương trình khuyến mãi này không áp dụng đồng thời với các chương trình khuyến mãi khác.
- Không áp dụng cho Suất chiếu Sớm, Suất chiếu Đặc biệt. 
- Không áp dụng cho các phòng chiếu đặc biệt như: IMAX, 4DX, GOLD CLASS, STARIUM, L’AMOUR, SWEETBOX…. 
- Áp dụng cho tất cả các suất chiếu thông thường. 
- Chủ thẻ không được đổi vé xem phim thành tiền mặt hoặc hoàn trả vé.</p>
												</div>
											</li>
																																	
																						
																																																																																																			
																																																							
																						
																						
																				
																																																																													
																						
																																												
																																	
																						<li class="partnership-hsbcv1 partnership-item">
												<div class="title">
													<input type="hidden" name="partner[hsbcv1]" value="20009648">
													<label>Mua 2 vé 2D giá 120.000 VNĐ khi thanh toán bằng Home Credit</label>
													<button type="button" class="button" onclick="partner('hsbcv1',this);">Sử dụng</button>
												</div>
												<div class="content cls-hsbcv1">
													<p>HOMECREDIT: Mua 2 vé 2D với giá 120.000VNĐ khi thanh toán bằng Thẻ Home Credit tại CGV.
Thời gian ưu đãi:
Hằng tuần từ thứ 2 đến chủ nhật từ 15/09/2024 đến 15/03/2025 (bắt đầu từ 9h – 23h59)
Nội dung ưu đãi:
-          Mua 2 vé 2D với giá 120.000VNĐ khi thanh toán bằng Thẻ Home Credit trực tuyến trên ứng dụng CGV Cinema hoặc website www.cgv.vn vào các ngày từ thứ 2 đến chủ nhật
-          Áp dụng cho vé xem phim 2D tại tất cả các rạp CGV trên toàn quốc
-          Số lượt ưu đãi áp dụng: 01 ưu đãi/tuần
-          Áp dụng cho tất cả chủ thẻ sử dụng thẻ Home Credit Card có số BIN bắt đầu là: 49223600, 49223601</p>
												</div>
											</li>
																																	<li class="partnership-cimb partnership-item">
												<div class="title">
													<input type="hidden" name="partner[cimb]" value="20009647">
													<label>Mua 02 vé 2D bằng Thẻ MSB MasterCard giá 95K đồng</label>
													<button type="button" class="button" onclick="partner('cimb',this);">Sử dụng</button>
												</div>
												<div class="content cls-cimb">
													<p>URBOX MSB: Mua 02 vé xem phim 2D bằng Thẻ MSB MasterCard tại CGV với giá 95.000 đồng.
Thời gian ưu đãi:
Hằng tuần từ Thứ Hai đến Chủ Nhật hàng tuần từ 16/09/2024 đến 23/02/2025 (bắt đầu từ 9h – 23h59) Không áp dụng vào các ngày Lễ, Tết.
Nội dung ưu đãi:
-          Mua 02 vé xem phim 2D bằng Thẻ MSB MasterCard tại CGV với giá 95.000 đồng trực tuyến trên ứng dụng CGV Cinema hoặc website www.cgv.vn vào các ngày từ thứ 2 đến chủ nhật
-          Áp dụng cho vé xem phim 2D tại tất cả các rạp CGV trên toàn quốc
-          Số lượt ưu đãi áp dụng: 02 ưu đãi/tuần
-          Áp dụng cho tất cả chủ thẻ sử dụng thẻ MSB Mastercard có số BIN bắt đầu là: 532451</p>
												</div>
											</li>
																																	
																						<li class="partnership-hsbcplatinum partnership-item">
												<div class="title">
													<input type="hidden" name="partner[hsbcplatinum]" value="20009724" onclick="partner(this);">
													<label>Mua 02 vé xem phim 2D với giá 110.000 VND bằng Thẻ KBank Cashback Plus tại CGV</label>
													<button type="button" class="button" onclick="partner('hsbcplatinum',this);">Sử dụng</button>
												</div>
												<div class="content cls-hsbcplatinum">
													<p>KBANK: "Mua 02 vé xem phim 2D với giá 110.000 VND bằng Thẻ KBank Cashback Plus tại CGV"
- Từ 10/10/2024 đến 10/04/2025 (CTKM có thể hết sớm hơn dự kiến).
-  Áp dụng hằng tuần từ ngày Thứ 2 đến Chủ Nhật. Từ 9:00 đến 23:59
-  Mua 02 vé xem phim 2D với giá 110.000vnđ bằng Thẻ KBank Cashback Plus tại CGV
- Chương trình chỉ áp dụng cho Khách hàng giao dịch mua vé trực tuyến trên ứng dụng CGV và website cgv.vn
- Đầu BIN thẻ áp dụng: BIN 45537204
- Chương trình chỉ áp dụng cho hạng ghế thường và hạng ghế VIP cho phim 2D
- Không áp dụng các xuất chiếu Lễ/Tết
- Mỗi chủ thẻ hợp lệ chỉ được hưởng 02 mã ưu đãi/tháng và 01 lần/ngày cho giao dịch áp dụng tại web cgv.vn và ứng dụng CGV
- Không áp dụng Early show, Sneak Show, các phòng chiếu đặc biệt: IMAX, 4DX, GOLD CLASS, STARIUM, L’AMOUR, SWEET BOX
- Không tích điểm/ tích chi tiêu cho chương trình              
- Vé xem phim không có giá trị đổi thành tiền mặt hay hoàn trả</p>
												</div>
											</li>
																					</ol>
									</div>
								</div>							
							</dd>
														<dt id="dt_method_6">
								Mã Khuyến Mãi							</dt>
							
							<dd id="dd_method_6" style="display: none;">
								<div class="promo-verification">
									<label>Nhập mã khuyến mãi</label><br/>
									<input name="code[promo]" title="Code" class="input-text required-entry validate-digits" type="text"> <button type="button" class="button campaign" onclick="campaign('promo',this);">Sử dụng</button>
								</div>
																<div class="col2-set">
									<div class="col-1 width-30 padding-02">
										<ol class="promo-list products-list" id="promo-list">
																					<li id="promo-54" onclick="chosecampaign('promo-54',this);">WICKEDGC</li>
																				</ol>
									</div>
									<div class="col-2 width-70 padding-02 border-left">
										<ol class="promo-view-list" id="promo-view-list">
																						<li class="promo-54 promo-item">
												<div class="title">
													<label>Giảm 30K khi mua từ 02 vé phim WICKED và thanh toán bằng Giftcard</label><br>
													<input type="hidden" name="campaign[54]" value="10009807" onclick="campaign(this);">
													<p><strong>Điều kiện &amp; điều khoản:</strong></p>
<p><strong>-&nbsp;Chương tr&igrave;nh c&oacute; &aacute;p dụng t&iacute;ch điểm v&agrave; t&iacute;ch lũy chi ti&ecirc;u tr&ecirc;n số tiền thực tế đ&atilde; thanh to&aacute;n.</strong></p>
<p>- Mỗi t&agrave;i khoản chỉ được nhận khuyến mại 01 lần trong thời gian diễn ra chương tr&igrave;nh.<br />- Chỉ &aacute;p dụng cho Thẻ qu&agrave; tặng/CGV eGift trong bộ sưu tập thẻ qu&agrave; tặng WICKED.</p>
<p>- KH&Ocirc;NG &aacute;p dụng cho thẻ qu&agrave; tặng loại cũ/ thẻ qu&agrave; tặng refund.</p>
<p>- KH&Ocirc;NG &aacute;p dụng đồng thời với c&aacute;c chương tr&igrave;nh khuyến mại kh&aacute;c.</p>
<p>- KH&Ocirc;NG &aacute;p dụng t&aacute;ch hoặc gộp gi&aacute; trị h&oacute;a đơn dưới mọi h&igrave;nh thức để tham gia chương tr&igrave;nh.</p>
<p>- Trong mọi trường hợp, quyết định của CGV l&agrave; quyết định cuối c&ugrave;ng.</p>
<p><strong><br /></strong><em>*Lưu &yacute;: Vui l&ograve;ng kiểm tra kỹ th&ocirc;ng tin giảm gi&aacute; trước khi thanh to&aacute;n. Trong trường hợp kh&aacute;ch h&agrave;ng thỏa điều kiện nhưng vẫn kh&ocirc;ng được giảm gi&aacute;, vui l&ograve;ng li&ecirc;n hệ CSKH:&nbsp;1900 6017 hoặc&nbsp;Email hoidap@cgv.vn để được hỗ trợ.&nbsp;C&aacute;c trường hợp kh&ocirc;ng &aacute;p dụng được khuyến m&atilde;i m&agrave; kh&aacute;ch h&agrave;ng đ&atilde; thanh to&aacute;n th&agrave;nh c&ocirc;ng sẽ kh&ocirc;ng được giải quyết.</em></p>												</div>
												<div class="content">
													<button type="button" class="button campaign" onclick="campaign('54',this);">Sử dụng</button>
												</div>
											</li>
																					</ol>
									</div>
								</div>
														
							</dd>
						</dl>
					</div>
					
				</li>
				<li id="opc-0" class="section">
					<div class="step-title">
						<h2><span class="class-step-payment">Bước 2: </span>Thẻ quà tặng</h2>
						<a href="#">Thay đổi</a>
					</div>
					
					<div id="checkout-step-0" class="step a-item">
					<dt id="dt_giftcard" class="checkout-giftcard-method">Thẻ quà tặng</dt>
					<dd id="dt_method_giftcard" style="display: none;">
					
						<div class="col2-set width-100 padding-02">
						<button type="button" class="button f-right" id="register-giftcard" title="Đăng ký">
									Đăng ký								</button>
							<div class="content">
																
								<p>Bạn có: <span class="price">0,00 ₫</span></p>
								<div class="input-box">												
									<input type="text" id="cgv:giftcard" name="giftcard" value="0" title="Balance for use" class="input-text validate-digits custom-input giftcard-input" />
									<button type="button" class="button giftcard-button apply button-paymen-1" onclick="giftcard('',this)">
										Sử dụng									</button>
									
									<!--<input type="checkbox" class="useallvalue allgiftcard" onclick="allgiftcard(this);"> Sử dụng hết-->
								</div>
								<p class="discount-chose-giftcard align-right">Giảm giá : <span class="price">0,00 ₫</span></p>
							</div>
						</div>
					</dd>

										</div>
				</li>
				
								<li id="opc-2" class="section">
					<div class="step-title">
						<h2><span class="class-step-payment">Bước 2: </span>Hình thức thanh toán</h2>
						<a href="#">Thay đổi</a>
					</div>
					
					<div id="checkout-step-2" class="step a-item">
						<dl class="sp-methods" id="checkout-payment-method-load">
					   																					<dt id="dt_method_onepay" style="margin:0 0 5px;">
									<input id="p_method_onepay" value="onepay" type="radio" name="payment[method]" title="ATM card (Thẻ nội địa)" class="radio" onclick="externalpayment(this);"/>
									<label for="p_method_onepay">
									<span class="pm_icon" style="background-image:url('https://iguov8nhvyobj.vcdn.cloud/media/catalog/product/placeholder/default/atm_icon.png')"></span>
									<span class="pm_name method_label">ATM card (Thẻ nội địa)</span>
									</label>
								</dt>
																			   																					<dt id="dt_method_onepayquocte" style="margin:0 0 5px;">
									<input id="p_method_onepayquocte" value="onepayquocte" type="radio" name="payment[method]" title="Thẻ quốc tế (Visa, Master, Amex, JCB) " class="radio" onclick="externalpayment(this);"/>
									<label for="p_method_onepayquocte">
									<span class="pm_icon" style="background-image:url('https://iguov8nhvyobj.vcdn.cloud/media/catalog/product/placeholder/default/visamaster_logo.png')"></span>
									<span class="pm_name method_label">Thẻ quốc tế (Visa, Master, Amex, JCB) </span>
									</label>
								</dt>
																			   																					<dt id="dt_method_momo" style="margin:0 0 5px;">
									<input id="p_method_momo" value="momo" type="radio" name="payment[method]" title="Mã MMCGV - 5K, -5K Quỹ nhóm" class="radio" onclick="externalpayment(this);"/>
									<label for="p_method_momo">
									<span class="pm_icon" style="background-image:url('https://iguov8nhvyobj.vcdn.cloud/media/catalog/product/placeholder/default/momo_icon.png')"></span>
									<span class="pm_name method_label pm_diff">Mã MMCGV - 5K, -5K Quỹ nhóm</span>
									</label>
								</dt>
																			   																					<dt id="dt_method_zalo_pay" style="margin:0 0 5px;">
									<input id="p_method_zalo_pay" value="zalo_pay" type="radio" name="payment[method]" title="Zalopay - 84k/vé + gói quà ưu đãi 530k" class="radio" onclick="externalpayment(this);"/>
									<label for="p_method_zalo_pay">
									<span class="pm_icon" style="background-image:url('https://iguov8nhvyobj.vcdn.cloud/media/catalog/product/placeholder/default/zalopay_logo2024.png')"></span>
									<span class="pm_name method_label pm_diff">Zalopay - 84k/vé + gói quà ưu đãi 530k</span>
									</label>
								</dt>
																			   																					<dt id="dt_method_vnpay" style="margin:0 0 5px;">
									<input id="p_method_vnpay" value="vnpay" type="radio" name="payment[method]" title="Nhập VNPAYCGV giảm đến 10K/bill" class="radio" onclick="externalpayment(this);"/>
									<label for="p_method_vnpay">
									<span class="pm_icon" style="background-image:url('https://iguov8nhvyobj.vcdn.cloud/media/catalog/product/placeholder/default/vnpay_newlogo.png')"></span>
									<span class="pm_name method_label">Nhập VNPAYCGV giảm đến 10K/bill</span>
									</label>
								</dt>
																			   																					<dt id="dt_method_shopeepay" style="margin:0 0 5px;">
									<input id="p_method_shopeepay" value="shopeepay" type="radio" name="payment[method]" title="ShopeePay" class="radio" onclick="externalpayment(this);"/>
									<label for="p_method_shopeepay">
									<span class="pm_icon" style="background-image:url('https://iguov8nhvyobj.vcdn.cloud/media/catalog/product/placeholder/default/shopeepay_online.jpg')"></span>
									<span class="pm_name method_label">ShopeePay</span>
									</label>
								</dt>
																			   																									   						</dl>
					</div>
				</li>
				
																		<li>
						<div class="form-group checkbox">
							<label>
								<input type="checkbox" class="iaccept" id="agreement-1" name="agreement[1]" value="1" title="Tôi đồng ý với điều khoản sử dụng và mua vé cho người có độ tuổi phù hợp" />
								<a class="button-cart-simple button-agreement" data-id="1" data-toggle="modal" data-target="#myModal">
									Tôi đồng ý với điều khoản sử dụng và mua vé cho người có độ tuổi phù hợp								</a>
							</label>
						</div>
					</li>
												</ol>
		</div>
		
																																																						
		<div class="col-2 width-30">		
			<div id="cart-sidebar" class="cart-sidebar">
				<div id="cart-items" class="cart-items">
					<table class="data-table">
						<thead>
							<tr>
								<td colspan="2">Tổng cộng</td>
							</tr>
						</thead>
						
						<tbody>
														<tr>
								<td>
									STD								</td>
								<td>
									<span class="price">200.000,00 ₫</span>								</td>
							</tr>
														
													</tbody>
						
						<tfoot>
							<tr>
								<td colspan="2"><span class="price">200.000,00 ₫</span></td>
							</tr>
						</tfoot>
					</table>
				</div>
				
				<div id="chosen-discount" class="chosen-discount">
					<table class="data-table">
						<thead>
							<tr>
								<td colspan="2">Khuyến mãi</td>
							</tr>
						</thead>
						
						<tbody>
						</tbody>
						
						<tfoot>
							<tr>
								<td colspan="2"><span class="price">0,00 ₫</span></td>
							</tr>
						</tfoot>
					</table>
				</div>
				
				<div id="chosen-payment" class="chosen-payment">
					<table class="data-table">
						<thead>
							<tr>
								<td colspan="2">Tổng số tiền thanh toán</td>
							</tr>
						</thead>
						
						<tbody>
						</tbody>
						
						<tfoot>
							<tr>
								<td colspan="2"><span class="price">200.000,00 ₫</span></td>
							</tr>
						</tfoot>
					</table>
				</div>
				<div class="countexpire">
					<!-- Display the countdown timer in an element -->
					<h3>Countdown Clock</h3>
					<p id="countdown"></p>
				</div>
			</div>
		</div>
	</div>

	<div class="content-bottom cgv-bottom">
		<div class="payment-content-format">
			<div class="format-bg-seatmap-top"><p>background</p></div>
			
			<div class="film-info-ticket">
				<div class="ticket-process-left" onclick="javascript:history.go(-1)">
					<a class="btn-left" href="javascript: void(0);" title="Previous">Previous</a>
				</div>
				
				<div class="film-cart-info">
										<div class="film-image">
						<img src="https://iguov8nhvyobj.vcdn.cloud/media/catalog/product/cache/1/thumbnail/dc33889b0f8b5da88052ef70de32f1cb/a/m/amazon-main-poster-printing.jpg" alt="CƯỜI XUYÊN BIÊN GIỚI"> 
					</div>
					
										<div class="film-info">
						<h2 class="product-name">
							CƯỜI XUYÊN BIÊN GIỚI						</h2>
						
						<span class="film-attribute">2D</span>
						<span class="film-grade">T13</span>
					</div>
					
										<div class="film-session">					
						<span class="film-session-site">
							<label>Rạp</label>
							CGV Crescent Mall						</span>						
						<span class="film-session-date">
							<label>Suất chiếu</label>
							23:20, 							26/11/2024						</span>
						<span class="film-session-screen">
							<label>Phòng chiếu</label>
							Cinema 2						</span>
						
						<span class="film-session-seats">
							<label>Ghế</label>
															<span>STD : D9, D8</span>
													</span>
					</div>
					
										<div class="select-seats">
						<span class="seats-subtotal">
							<label>Giá vé</label>
							<span class="icon-infofooter-combo">icon</span>
							<span class="pricedata"><span class="price">200.000,00 ₫</span></span>
						</span>
							
						<span class="combo-subtotal">
							<label>Combo</label>
							<span class="icon-infofooter-combo">icon</span>
							<span class="pricedata"><span class="price">0,00 ₫</span></span>
						</span>
						<span class="discount-grandtotal">
							<label>Khuyến mãi</label>
							<span class="lastdiscount" style="padding-left:5px"><span class="price">0,00 ₫</span></span>
						</span>
						<span class="session-grandtotal">
							<label>Tổng</label>
							<span class="lastprice"><span class="price">200.000,00 ₫</span></span>
						</span>
					</div>
				</div>
				
				<div class="ticket-process-right">
					<button type="button" title="Proceed to Checkout" class="button btn-proceed-checkout btn-checkout" name="process" onclick="process(this);">
						<span><span>Proceed to checkout</span></span>
					</button>
				</div>
			</div>
			
			<div class="format-bg-seatmap-bottom"><p>background</p></div>
		</div>
	</div>

	<!--popup giftcard Form -->
	<div id="contactdiv" class="cgv-popup">
		<form class="popupform" action="#" id="contact">
			<img src="https://www.cgv.vn/skin//frontend/cgv/default/images/button_cancel.png" class="img" id="cancel"/>
			<h3>Đăng ký Giftcard</h3>
			<hr/><br/>
			
			<label for="giftcard-no">Số Giftcard <span>*</span></label>
			<input type="text" id="giftcard_name" name="gft[no]" class="input-text required-entry maximum-length-16 minimum-length-16 validate-length validate-alphanum" /><br/><br/>
			
			<label for="giftcard-code">Mã Pin <span>*</span></label>		
			<input type="text" id="giftcard_code" name="gft[pin]" class="input-text required-entry maximum-length-6 minimum-length-6 validate-length validate-digits" /><br/><br/>
			
			<p><button type="button" class="button cgv-btnregisterpay cgv-giftcardregister" id="send" name="giftcard" title="Apply">
					<span><span>Đăng ký</span></span>
				</button></p>
		</form>
	</div>

	<!--popup coupon Form -->
	<div id="coupondiv" class="cgv-popup">
		<form class="popupform" action="#" id="couponform">
			<img src="https://www.cgv.vn/skin//frontend/cgv/default/images/button_cancel.png" class="img" id="cancelcoupon"/>
			<h3>Đăng ký Coupon</h3>
			<br/><br/>		
			<label for="giftcard-no">Số Coupon <span>*</span></label>
			<input type="text" id="coupon_code" name="coupon[no]" /><br/><br/>
			<p>
				<button type="button" class="button cgv-btnregisterpay cgv-couponregister" id="sendcpn" title="Apply">
					<span><span>Đăng ký</span></span>
				</button>
			</p>
		</form>
	</div>

	<!--popup movie Voucher Form -->
	<div id="voucherdiv" class="cgv-popup">
		<form class="popupform" action="#" id="voucherform">
			<img src="https://www.cgv.vn/skin//frontend/cgv/default/images/button_cancel.png" class="img" id="cancel"/>
			<h3>Đăng ký Voucher</h3><br/><br/>
			
			<label for="voucher-no">Số voucher <span>*</span></label>
			<input type="text" id="voucher_name" name="voucher[no]" class="input-text required-entry maximum-length-20 validate-length validate-alphanum" /><br/><br/>
			
			<label for="voucher-code">Mã Pin <span>*</span></label>		
			<input type="text" id="voucher_code" name="voucher[pin]" class="input-text required-entry maximum-length-6 validate-length validate-digits" /><br/><br/>
			
			<p>
				<button type="button" class="button cgv-btnregisterpay cgv-voucherregister" title="Đăng ký">
					<span><span>Đăng ký</span></span>
				</button>
			</p>
		</form>
	</div>
		
	<div id="loading-mask" style="left: -2px; top: 0px;">
		<p class="loader" id="loading_mask_loader">
			<img src="https://www.cgv.vn/skin/frontend/cgv/default/images/ajax-loader.gif" alt="Loading...">
			<br>Đang tải thông tin...		</p>
	</div>
	<a class="btn" data-popup-open="popup-1" style="display:none;" href="#" id="zalopay_popup">Open Popup #1</a>
	 
	<div class="popup" data-popup="popup-1">
		<div class="popup-inner">
			<h2>ZaloPay - Mã QR Code</h2>
			<div class="qr-content">
				<div class="qr-zalopay">
					<p class="resultzalopay"></p>
					<p class="timer-remain">Thời gian quét mã QR còn lại <span  id="timer"></span></p>
				</div>
				<div class="qr-instructions">
					<p><strong>Thực hiện theo hướng dẫn sau để thanh toán:</strong></p>
					<p>Bước 1: Mở ứng dụng ZaloPay để thanh toán.</p>
					<p>Bước 2: Chọn "Thanh Toán" và quét mã QR code tại hướng dẫn này.</p>
					<p>Bước 3: Hoàn thành các bước thanh toán theo hướng dẫn.</p>
				</div>
			</div>
			<a class="popup-close" data-popup-close="popup-1" href="#">x</a>
		</div>
	</div>
	<!-- The Modal -->
	<div id="otpModal" class="modal">

	  <!-- Modal content -->
	  <div class="modal-content">
		<span class="close">&times;</span>
		<p class="otp_content"></p>
		<p class="otp_pin"><input inputmode="numeric" pattern="[0-9]*" type="password" id="otp" autocomplete="off" /></p>
		<p class="otp_pin_error"></p>
		<p class="otp_confirm"><input type="button" value="Xác nhận" id="otp_confirm" /></p>
		<p class="otp_resend"> (<span id="countdown_otp">60</span>s)</p>
		</div>

	</div>
	<div id="confirmOverlay">
	<div id="confirmBox">
	    <div class="message">Khi bạn thay đổi phương thức giảm giá, giá trị thanh toán bằng Thẻ Quà Tặng/ eGift sẽ trở về mặc định. Bạn có muốn tiếp tục?</div>
	    <span class="button no">Hủy</span>
	    <span class="button yes">Đồng ý</span>
	</div>
</div>
	<style>
	#confirmOverlay{
    display: none;
    width:100%;
    height:100%;
    position:fixed;
    top:0;
    left:0;
    background:url('ie.png');
    background: -moz-linear-gradient(rgba(11,11,11,0.1), rgba(11,11,11,0.6)) repeat-x rgba(11,11,11,0.2);
    background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(rgba(11,11,11,0.1)), to(rgba(11,11,11,0.6))) repeat-x rgba(11,11,11,0.2);
    z-index:100000;
}
#confirmBox
{
    background-color: #eee;
    border-radius: 5px;
    border: 1px solid #aaa;
    position: fixed;
    /*width: 300px;
    left: 50%;
    margin-left: -150px;*/
    width: 30%;
    left: 30%;
    padding: 6px 8px 8px;
    box-sizing: border-box;
    text-align: center;
    top: 10%;
    z-index: 999;
}
#confirmBox h3{
	margin-top:5px;
}
#confirmBox .button {
    display: inline-block;
    border-radius: 3px;
    border: 1px solid #aaa;
    padding: 2px;
    text-align: center;
    text-transform: capitalize;
    width: 80px;
    cursor: pointer;
}
#confirmBox .button.no{
	background: #ddd;
	color: #000;
}
#confirmBox .button:hover
{
    background-color: #ddd;
    color:#000;
}
#confirmBox .message
{
    text-align: left;
    margin: 20px 0;
}
	#otp{
			width: 20%;
			text-align: center;
		}
		#otp_confirm{
			background-color: #e71a0f;
			color: white;
			padding: 9px 20px;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			text-transform: uppercase;
		}
		.otp_resend{
			color: #C1C1C1;
		}
		#otp_resend{
			border: none;
			background: none;
			color: #C1C1C1;
			text-decoration: underline;
			cursor: none;
		}
		.otp_pin_error{
			color: #e71a0f;
			text-align: center;
			margin: 0.4em 0;
			height: 1.5em
		}
		/* The Modal (background) */
	.modal {
	  display: none; /* Hidden by default */
	  position: fixed; /* Stay in place */
	  z-index: 1; /* Sit on top */
	  left: 0;
	  top: 0;
	  width: 100%; /* Full width */
	  height: 100%; /* Full height */
	  overflow: auto; /* Enable scroll if needed */
	  background-color: rgb(0,0,0); /* Fallback color */
	  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
	}

	/* Modal Content/Box */
	.modal-content {
	  background-color: #fefefe;
	  margin: 15% auto; /* 15% from the top and centered */
	  padding: 20px;
	  border: 1px solid #888;
	  width: 40%; /* Could be more or less, depending on screen size */
	}
	@media only screen and (max-width: 770px) {
		.modal-content {
		  margin: 15% auto; /* 15% from the top and centered */
		  padding: 10px;
		  width: 90%; /* Could be more or less, depending on screen size */
		}
		#otp{
			width: 40%;
		}
	}
	.otp_pin,.otp_confirm, .otp_resend{
		text-align: center;
		margin: 1em 0;
	}
	/* The Close Button */
	.close {
	  color: #aaa;
	  float: right;
	  font-size: 28px;
	  font-weight: bold;
	  margin-top: -19px;
		margin-right: -19px;
	}

	.close:hover,
	.close:focus {
	  color: black;
	  text-decoration: none;
	  cursor: pointer;
	}
		.width-30 {
			width: 29%;
		}
		.width-35 {
			width: 34%;
		}
		.width-50 {
			width: 49%;
		}
		.width-65 {
			width: 64%;
		}
		.width-70 {
			width: 69%;
		}
		.width-100 {
			width: 100%;
		}
		.padding-02 {
			padding: 0 2% !important;
		}
		.height-100px {
			height: 100px;
		}
		.vertical-scroll {
			overflow-y: auto;
			display: block;
		}
		input[name="code[vpb]"]{
			width:75%;
			margin-right: 10px;
			margin-bottom:15px;
		}
		.vertical-scroll tr {
			display: contents;
			overflow: hidden;
		}
		.f-left {
			float: left;
		}
		.f-right {
			float: right;
		}
		.col2-set .title {
			min-height: 40px;
			margin-top:10px;
		}
		.section {
			cursor: pointer;
		}
		.cls-seabank p{
			padding-top:10px;
		}
		.qr-content{
			float: left;
			width: 100%;
		}
		#timer{
			color: #ff0000;
			font-weight: bold;
		}
		.resultzalopay{
			text-align:center;
		}
		.resultzalopay img{
			display:inline-block;
		}
		.timer-remain{
			font-style:italic;
		}
		.qr-content .qr-zalopay{
			float: left;
			width: 42%;
			margin: 0 2% 0 0;
		}
		.qr-content .resultzalopay{
			text-align:center;
		}
		.qr-content .qr-instructions{
			float: left;
			width: 52%;
			margin: 0 2% 0 2%;
			text-align: left;
		}
		.qr-instructions p{
			padding-top:20px;
		}
		#checkout-step-0{background:none}
		#checkout-step-0 dt, #checkout-step-1 dt , .cart-sidebar tr {
			background: #fff1ce;
		}
		#checkout-step-0, #checkout-step-1 dt, #checkout-step-0 dt {
			padding : 10px;
		}
		.data-table tbody tr {
			border-bottom: 2px dashed #c3bda5;
		}
		#checkout-step-1 dl dt, #checkout-step-0 dt {
			margin-bottom: 5px;
		}
		.discount-chose-points , .discount-chose-giftcard {
			border-top: 1px dashed #c3bda5;
			margin: 15px 0;
			padding-top:10px;
		}
		.partnership-list, .partnership-view-list {
			width: 100%;
			margin: 20px 0;
		}
		.partnership-list li, .partnership-view-list li {
			float: none;
		}
		.partnership-list li:last-child {
			padding-bottom: 0;
			border-bottom: none;
		}
		.border-left {
			border-left: 1px solid #ededed;
		}
		.partnership-view-list .partnership-item {
			display: none;
		}	
		.cart-items, .chosen-discount, .chosen-payment {
			border: 1px solid #d4d3c9;
		}
		.cart-sidebar table {
			width: 100%;
		}
		.cart-sidebar thead, .cart-sidebar tfoot {
			font-weight: bold;
			text-align: center;
		}
		.cart-sidebar tfoot td {
			background: #d0cece;
		}
		.cart-sidebar thead tr {
			border-bottom: 1px solid #d4d3c9;
		}
		.chosen-discount, .chosen-payment {
			margin-top: 15px;
		}
		.cart-sidebar .data-table tbody tr {
			border-bottom: 1px solid #d4d3c9;
		}
		.chosen-payment thead tr{
			background: #e71a0f;
			color: #fff;
		}
		.data-table tbody tr:last-child {
			border-bottom: none;
		}
		.data-table tbody tr:last-child td {
			border-bottom: none;
		}
		.vertical-scroll tr{
			float:left;
			width:100%;
		}
		/* Outer */
	.popup {
		width:100%;
		height:100%;
		display:none;
		position:fixed;
		top:0px;
		left:0px;
		background:rgba(0,0,0,0.75);
	}
	 
	/* Inner */
	.popup-inner {
		max-width:700px;
		width:90%;
		padding:15px;
		position:absolute;
		top:50%;
		left:50%;
		-webkit-transform:translate(-50%, -50%);
		transform:translate(-50%, -50%);
		box-shadow:0px 2px 6px rgba(0,0,0,1);
		border-radius:3px;
		background:#fff;
		text-align:center;
	} 
	.popup-inner h2{
		border-bottom: 1px solid #636363;
		text-align: left;
		padding-bottom: 10px;
		font-size: 15px;
		font-weight: 600;
	}
	/* Close Button */
	.popup-close {
		width:30px;
		height:30px;
		padding-top:4px;
		display:inline-block;
		position:absolute;
		top:0px;
		right:0px;
		transition:ease 0.25s all;
		-webkit-transform:translate(50%, -50%);
		transform:translate(50%, -50%);
		border-radius:1000px;
		background:rgba(0,0,0,0.8);
		font-family:Arial, Sans-Serif;
		font-size:20px;
		text-align:center;
		line-height:100%;
		color:#fff;
	} 
	.popup-close:hover {
		-webkit-transform:translate(50%, -50%) rotate(180deg);
		transform:translate(50%, -50%) rotate(180deg);
		background:rgba(0,0,0,1);
		text-decoration:none;
	}
	.countexpire{
		margin-top:15px;
		background:#d0cece;
		color: #fff;
		text-align: center;
		border: 1px solid #d4d3c9;
	}
	.countexpire h3{
		background: #fff1ce;
		padding: 10px 0;
		font-weight: bold;
		font-size: 13px;
	}
	#countdown{
		padding: 0 0 10px;
		font-weight: bold;
	}
	.cgvminutes,.cgvseconds{
		font-size: 20px;
		font-weight: normal;
	}
	#countdown > div {
		padding: 10px;
		border-radius: 3px;
		background: #fdfcf0;
		display: inline-block;
	}
	#countdown div > span {
		padding: 15px;
		border-radius: 3px;
		background: #e71a0f;
		display: inline-block;
		width: 50px;
	}
	.smalltext {
		padding-top: 5px;
		font-size: 14px;
		font-weight: 100;
		color:#999;
	}
	.cgvianticket-color{
		color:#e71a0f;
	}
	.promo-list li, .promo-view-list li{
		float: none;
	}
	.promo-list li.active {
		background-position: 160px 0px;
		color: #ca252c;
	}
	.promo-list li {
		padding-bottom: 20px;
		margin-bottom: 20px;
		border-bottom: 1px solid #ededed !important;
		width: 100%;
		/*background: url(../images/bg-cgv/bg-icon-partner-cgv.png) no-repeat right bottom;*/
		height: 16px;
		color: #bbbdbf;
		font-weight: bold;
	}
	.promo-list li:last-child {
		padding-bottom: 20px;
		border-bottom: none;
	}
	.promo-list li {
		padding-bottom: 20px;
		margin-bottom: 20px;
		border-bottom: 1px solid #ededed;
	}
	.promo-list, .promo-view-list {
		width: 100%;
		margin: 20px 0;
	}
	.promo-item{
		display: none;
	}
	.promo-verification{
		float: left;
		width: 100%;
		margin-bottom: 15px;
		padding-left: 20%;
	}
	.promo-verification label,.promo-item .title, .promo-item .title label{
		padding-bottom: 10px;
	}
	.pm_icon{
		background-position:50% 50%;background-size:100% 100%;width:37px; height:37px;margin-right: 5px;margin-top: -9px;display: inline-block;
	}
	.pm_name{
		margin-top: -31px;vertical-align: middle;display:inline-block
	}
	.pm_diff{font-weight:bold;}
	.select-seats span label{
		font-weight:normal;
	}
	.select-seats{
		width: 206px;
		margin-left: 5px;
	}
	.discount-grandtotal{
		clear:both;
	}
	.film-session{
		width:270px;
		margin-left: 5px;
	}
	.lastdiscount,.lastprice{
		font-size:13px;
	}
	.notice_info{
		padding: 5px 10px 15px;
	}
	</style>
		<script type="text/javascript">
	//<![CDATA[
		var prname = "7254_CƯỜI XUYÊN BIÊN GIỚI";
		smartech('dispatch','Checkout_Web',{'prname':prname});
		let textconfirm;
		let termconfirm ='Khi bạn thay đổi phương thức giảm giá, giá trị thanh toán bằng Thẻ Quà Tặng/ eGift sẽ trở về mặc định. Bạn có muốn tiếp tục?';
		$j(window).load(function(){
			$j('#loading-mask').show();
			var section = $j('.section').first().attr('id');
			$j('#'+section).click();
			$j('#loading-mask').hide();
			$j('.partnership-list li').first().addClass('active');
			$j('.partnership-view-list li').first().show();
		});
		
		jQuery('.section').on('click',function(){
			if($j(this).attr('id')=='opc-2'){
				$j('#opc-0 .step').addClass('disablediv');
				$j('#opc-1 .step').addClass('disablediv');
			}
			$j(this).find('.step').show();		
		});
		
		jQuery('.checkout-discount-method dt, .checkout-giftcard-method').on('click',function(){
			$j('dd').hide();
			$j(this).next().show();
		});
		jQuery('.checkout-discount-method dt').on('click',function(){
			if(pointsdisount>0 || giftcarddisount>0 || egiftcarddisount>0 || coupondisount>0 || voucherdisount>0 || partnerdisount>0 || campaigndisount>0){
				$j("#confirmOverlay").show();
				doConfirm(termconfirm, function yes() {
					reset();
					$j("#confirmOverlay").hide();

				}, function no() {
					$j('#confirmBox').show();
					$j("#confirmOverlay").show();
				});
			}
			
		});
		
		// Subtotal
		var sutotal = parseInt('200000');
		var grandtotal = parseInt('200000');
		var init_amt = parseInt('200000');
		var vitcarddisount = 0;
		var pointsdisount = 0;
		var giftcarddisount = 0;
		var egiftcarddisount = 0;
		var coupondisount = 0;
		var voucherdisount = 0;
		var partnerdisount = 0;
		var campaigndisount = 0;
		var momoclicked = false;
		var zaloclicked = false;
		var airpayclicked = false;
		var shopeepayclicked = false;
		var point_element = '';
		var otp_input = '';
		var max_click = 3;
		var max_click_start = 0;
		var otp_timer;
		var otp_send = 0;
		var otp_msg = '';
		
		// Get the modal
		var modal = document.getElementById("otpModal");
		// Get the <span> element that closes the modal
		var span = document.getElementsByClassName("close")[0];
		// When the user clicks on <span> (x), close the modal
		span.onclick = function() {
		  modal.style.display = "none";
		}

		// When the user clicks anywhere outside of the modal, close it
		window.onclick = function(event) {
		  if (event.target == modal) {
			modal.style.display = "none";
		  }
		}
		
		function doConfirm(msg, yesFn, noFn) {
			var confirmBox = $j("#confirmBox");
			//confirmBox.find(".message").text(msg);
			confirmBox.find(".yes,.no").unbind().click(function () {
				confirmBox.hide();
			});
			confirmBox.find(".yes").click(yesFn);
			confirmBox.find(".no").click(noFn);
			confirmBox.show();
		}
		// Chose partnership
		function chosepartner(id, obj)
		{
			$j('.partnership-item').hide();
			$j('.'+id).show();
			$j('.partnership-list li').removeClass('active');
			$j(obj).addClass('active');
		}
		
		// Chose campaign
		function chosecampaign(id, obj)
		{
			$j('.promo-item').hide();
			$j('.'+id).show();
			$j('.promo-list li').removeClass('active');
			$j(obj).addClass('active');
		}
		
		// Reset all discount method
		function reset() 
		{
			$j.ajax({
				url: 'https://www.cgv.vn/default/cinox/discount/reset/',
				dataType: 'json',
				beforeSend: function(){
					$j('#loading-mask').show();
				}
			}).done(function(response) {
				if (response.redirect) {
					location.reload();
					return;
				}
				if (response.success) {
					vitcarddisount = 0;
					pointsdisount = 0;
					giftcarddisount = 0;
					egiftcarddisount = 0;
					coupondisount = 0;
					voucherdisount = 0;
					partnerdisount = 0;
					campaigndisount = 0;
					
					sutotal = parseInt(response.sutotal);
					grandtotal = parseInt(response.remain);
					
					$j('.chosen-discount .price').text(formatCurrency(sutotal - grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
					$j('.chosen-payment .price').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
					$j('.lastdiscount').text(formatCurrency(sutotal - grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
					$j('.lastprice').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
					$j('.chosen-discount tbody').empty();
					$j('.chosen-payment tbody').empty();
					$j('#checkoutSteps .section').removeClass('disablediv');
					$j('.section *').removeClass('disablediv');
					
					$j('input[name=\'points\']').val(0);
					$j('.points-button').removeAttr('disabled');
					$j('.points-button').removeClass('cancel');
					$j('.points-button').addClass('apply');
					$j('.points-button').text('Sử dụng');
					$j('.discount-chose-points .price').text(formatCurrency(pointsdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
					
					$j('input[name=\'giftcard\']').val(0);
					$j('.giftcard-button').removeAttr('disabled');
					$j('.giftcard-button').removeClass('cancel');
					$j('.giftcard-button').addClass('apply');
					$j('.giftcard-button').text('Sử dụng');
					$j('.discount-chose-giftcard .price').text(formatCurrency(giftcarddisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
					
					$j('input').removeAttr('disabled');
					$j('button').removeAttr('disabled');
					$j('button.button.cancel').text('Sử dụng');
					$j('button').removeClass('cancel');
					//$j('#checkout-admissioncard-table button').removeAttr('disabled');
					//var $radios = $j('input:radio[value="momo"]');
					$j('input').prop('checked', false);
					
					if(momoclicked==true) {
						$j('input[value="momo"]').prop('checked', true);
						$j('#opc-0 .step').addClass('disablediv');
						$j('#opc-1 .step').addClass('disablediv');
						momoclicked = false;
					}else{
						momoclicked = false;
					}
					if(zaloclicked==true) {
						$j('input[value="zalo_pay"]').prop('checked', true);
						$j('#opc-0 .step').addClass('disablediv');
						$j('#opc-1 .step').addClass('disablediv');
						zaloclicked = false;
					}else{
						zaloclicked = false;
					}
					if(airpayclicked==true) {
						$j('input[value="airpay"]').prop('checked', true);
						$j('#opc-0 .step').addClass('disablediv');
						$j('#opc-1 .step').addClass('disablediv');
						airpayclicked = false;
					}else{
						airpayclicked = false;
					}
					if(shopeepayclicked==true) {
						$j('input[value="shopeepay"]').prop('checked', true);
						$j('#opc-0 .step').addClass('disablediv');
						$j('#opc-1 .step').addClass('disablediv');
						shopeepayclicked = false;
					}else{
						shopeepayclicked = false;
					}
				}
				else {
					var msg = response.error_messages;
					if (Object.isArray(msg)) {
						msg = msg.join("\n").stripTags().toString();
					}
					if (msg) {
						alert(msg);
					}
				}
				$j('#checkout-payment-method-load .form-list').hide();
				$j('#loading-mask').hide();
			});
		}
		
		// Priority Pass Card
		function vitcard(vitcard, obj) 
		{
			$j('#checkout-admissioncard-table button').attr('disabled','disabled');
			if($j(obj).hasClass('apply')) {
				// Reset voucher, Partnership,
				$j('input[name=\'voucher[]\']').removeAttr('checked');
				$j('input[name=\'partner[]\']').removeAttr('checked');
				
				$j('#dt_method_1').removeClass('disablediv');
				$j('#dt_method_2').removeClass('disablediv');
				$j('#dt_method_3').removeClass('disablediv');
				$j('#dt_method_onepay').removeClass('disablediv');
				
				// reset another discount method
				$j('input[name=\'points\']').val(0);
				pointsdisount = 0;
				$j('input[name=\'giftcard\']').val(0);
				giftcarddisount = 0;
				
				coupondisount = 0;
				voucherdisount = 0;
				partnerdisount = 0;
				
				$j('.chosen-discount tbody').empty();
				
				$j.ajax({
					type: 'POST',
					url: 'https://www.cgv.vn/default/cinox/sales/vitcard/',
					data: {vitcard : vitcard},
					dataType: 'json',
					beforeSend: function(){
						$j('#loading-mask').show();
					}
				}).done(function(response) {
					if (response.redirect) {
						location.reload();
						return;
					}
					if (response.success) {
						var msg = response.notify;
						if (Object.isArray(msg)) {
							msg = msg.join("\n").stripTags().toString();
						}
						if (msg) {
							alert(msg);
						}
						
						sutotal = parseInt(response.sutotal);
						vitcarddisount = parseInt(response.discount);
						grandtotal = parseInt(response.remain);
						voucherdisount = 0;
						coupondisount = 0;
						pointsdisount = 0;
						partnerdisount = 0;
						campaigndisount = 0;
						
						$j(obj).removeAttr('disabled');
						$j(obj).removeClass('apply');
						$j(obj).addClass('cancel');
						//$j('#opc-1').addClass('disablediv');
						$j(obj).text('Hủy');
						
						var html = '<tr><td>Pass Card</td><td>'+formatCurrency(vitcarddisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1})+'</td></tr>';
						$j('.chosen-discount tbody').html(html);
						$j('#admissioncard-price-'+vitcard).text(formatCurrency(vitcarddisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						
						$j('.chosen-discount .price').text('-'+formatCurrency(vitcarddisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));					
						$j('.chosen-payment .price').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						
						var dis = vitcarddisount + giftcarddisount;

						$j('.lastdiscount').text(formatCurrency(dis, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.lastprice').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));

						if(grandtotal === 0) {
							$j('#opc-0').addClass('disablediv');
							$j('#opc-2').addClass('disablediv');
							$j('#dt_method_1').addClass('disablediv');
							$j('#dt_method_2').addClass('disablediv');
							$j('#dt_method_4').addClass('disablediv');
							$j('#dt_method_5').addClass('disablediv');
							$j('#dt_method_6').addClass('disablediv');
							$j('#dt_giftcard').addClass('disablediv');
							$j('#dt_method_gift_card').addClass('disablediv');

							$j('.points-input').attr('disabled','disabled');
							$j('.points-button').attr('disabled','disabled');

							$j('.giftcard-input').attr('disabled','disabled');
							$j('.giftcard-button').attr('disabled','disabled');
						}else{
							$j('#opc-0').removeClass('disablediv');
							$j('#opc-2').removeClass('disablediv');
							$j('#dt_method_1').addClass('disablediv');
							$j('#dt_method_2').addClass('disablediv');
							$j('#dt_method_3').addClass('disablediv');
							$j('#dt_method_4').removeClass('disablediv');
							$j('#dt_method_5').addClass('disablediv');
							$j('#dt_method_6').addClass('disablediv');
							
							$j('.points-input').attr('disabled','disabled');
							$j('.points-button').attr('disabled','disabled');
							$j('#dt_giftcard').removeClass('disablediv');
							$j('#dt_method_gift_card').removeClass('disablediv');
						}
					}
					else {
						var msg = response.error_messages;
						if (Object.isArray(msg)) {
							msg = msg.join("\n").stripTags().toString();
						}
						if (msg) {
							alert(msg);
						}
					}

					$j('#loading-mask').hide();
				});
			}
			else {
				$j('#checkout-admissioncard-table button').removeAttr('disabled');
				$j(obj).removeClass('cancel');
				$j(obj).addClass('apply');
				$j(obj).text('Sử dụng');
				$j('#opc-1').removeClass('disablediv');
				$j('#opc-2').removeClass('disablediv');
				
				grandtotal = grandtotal + vitcarddisount;
				$j('.chosen-payment .price').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				
				vitcarddisount = 0;
				$j('.chosen-discount .price').text(formatCurrency(vitcarddisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				$j('#admissioncard-price-'+vitcard).text(formatCurrency(vitcarddisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				$j('.lastdiscount').text(formatCurrency(vitcarddisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				$j('.lastprice').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				$j('.chosen-discount tbody').empty();
			}		
		}
		
		// CGV Points	
		function points(obj) 
		{
			var _points = parseInt($j('input[name=\'points\']').val().trim());
			var _balance = parseInt($j('input[name=\'giftcard\']').val().trim());
			if($j(obj).hasClass('apply')) {
				let limit_point = Math.floor((0.9 *(grandtotal-pointsdisount))/1000);
				if(_points > limit_point){
					alert('Max points is '+limit_point);
					$j('.allpoints').removeAttr('checked');return;
				}
				// Points min value policy
				if(_points < 20) {
					alert('Min points is 20.');
					$j('.allpoints').removeAttr('checked');
				}
				else {
					if(_points > limit_point){
						_points = limit_point;
					}
					$j('input[name=\'points\']').val(_points);
					$j.ajax({
						type: 'POST',
						url: 'https://www.cgv.vn/default/cinox/discount/pointsmethod/',
						data: {points : _points, balance : _balance},
						dataType: 'json',
						beforeSend: function(){
							$j('#loading-mask').show();
						}
					}).done(function(response) {
						if (response.redirect) {
							location.reload();
							return;
						}
						if (response.success) {
							sutotal = parseInt(response.sutotal);
							pointsdisount = parseInt(response.discount);
							grandtotal = parseInt(response.remain);
							egiftdisount = parseInt(response.egift);
							giftcarddisount = parseInt(response.giftcard);
							$j('.discount-points-item').remove();
							var html = '<tr class="discount-points-item"><td>Điểm thưởng</td><td>'+formatCurrency(pointsdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1})+'</td></tr>';
							point_element = html;
							$j(html).appendTo('.chosen-discount tbody');
							$j('.discount-chose-points .price').text(formatCurrency(pointsdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
							$j('.discount-giftcard-item').remove();
							$j('.discount-egiftcard-item').remove();
							var dis = pointsdisount ;//+ egiftdisount + giftcarddisount + coupondisount + voucherdisount;
							$j('.chosen-discount .price').text('-'+formatCurrency(dis, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
							$j('.chosen-payment .price').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
							$j('.lastdiscount').text(formatCurrency(dis, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
							$j('.lastprice').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
							$j('input[name=\'giftcard\']').val(0);
							$j('.discount-chose-giftcard .price').text(formatCurrency(0, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
							$j('.gift-card-checkbox input').prop('checked', false);
							if(grandtotal == 0) {							
								$j('#opc-0').addClass('disablediv');
								$j('#opc-2').addClass('disablediv');
								$j('#dt_method_1').addClass('disablediv');
								$j('#dt_method_2').addClass('disablediv');
								//$j('#dt_method_3').addClass('disablediv');
								$j('#dt_method_4').addClass('disablediv');
								$j('#dt_method_5').addClass('disablediv');
								$j('#dt_method_6').addClass('disablediv');
								$j('#dt_giftcard').addClass('disablediv');
								$j('#dt_method_gift_card').addClass('disablediv');

								$j('.points-input').attr('disabled','disabled');
								$j('.points-button').attr('disabled','disabled');

								$j('.giftcard-input').attr('disabled','disabled');
								$j('.giftcard-button').attr('disabled','disabled');
								
								$j(obj).removeClass('apply');
								$j(obj).addClass('cancel');
								$j(obj).text('Hủy');
							}else{
								$j('#opc-0').removeClass('disablediv');
								$j('#opc-2').removeClass('disablediv');
								$j('#dt_method_1').addClass('disablediv');
								$j('#dt_method_2').addClass('disablediv');
								$j('#dt_method_3').removeClass('disablediv');
								$j('#dt_method_4').addClass('disablediv');
								$j('#dt_method_5').addClass('disablediv');
								$j('#dt_method_6').addClass('disablediv');

								$j('.points-input').attr('disabled','disabled');
								$j('.points-button').attr('disabled','disabled');
								$j('#dt_giftcard').removeClass('disablediv');
								$j('#dt_method_gift_card').removeClass('disablediv');
							}
						}
						else {
							var msg = response.error_messages;
							if (Object.isArray(msg)) {
								msg = msg.join("\n").stripTags().toString();
							}
							if (msg) {
								alert(msg);
								$j('.discount-chose-points .price').text(formatCurrency(0, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
							}
							//if($j('.chosen-discount').hasClass('discount-points-item')){
								grandtotal = parseInt(response.remaining_amount);
								$j('.discount-points-item').remove();
								$j('.chosen-discount .price').text('-'+formatCurrency(response.remaining_amount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
							//}
							
							$j(obj).removeAttr('checked');
						}					
						
						$j('#loading-mask').hide();
					});
				}
			}
			else {
				$j.ajax({
					url: 'https://www.cgv.vn/default/cinox/discount/cancelpointsmethod/',
					dataType: 'json',
					beforeSend: function(){
						$j('#loading-mask').show();
					}
				}).done(function(response) {
					if (response.redirect) {
						location.reload();
						return;
					}
					if (response.success) {
						sutotal = parseInt(response.sutotal);
						pointsdisount = parseInt(response.discount);
						grandtotal = parseInt(response.remain);
						coupondisount = 0;
						vitcarddisount = 0;
						voucherdisount = 0;
						partnerdisount = 0;
						campaigndisount = 0;

						var dis = vitcarddisount + pointsdisount + giftcarddisount + coupondisount + voucherdisount;
						$j('.discount-chose-points .price').text(formatCurrency(pointsdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.chosen-discount .price').text(formatCurrency(sutotal - grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.chosen-payment .price').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.lastdiscount').text(formatCurrency(dis, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.lastprice').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						
						$j('input[name=\'points\']').val(0);
						$j('.discount-points-item').remove();
						$j('.allpoints').removeAttr('checked');
						$j('.allpoints').removeAttr('disabled');
						$j('.points-input').removeAttr('disabled');
						$j('.points-button').removeAttr('disabled');

						$j(obj).removeClass('cancel');
						$j(obj).addClass('apply');
						$j(obj).text('Sử dụng');
						
						$j('#opc-0').removeClass('disablediv');
						$j('#opc-2').removeClass('disablediv');
						$j('#dt_method_1').removeClass('disablediv');
						$j('#dt_method_2').removeClass('disablediv');
						$j('#dt_method_3').removeClass('disablediv');
						$j('#dt_method_4').removeClass('disablediv');
						$j('#dt_method_5').removeClass('disablediv');
						$j('#dt_method_6').removeClass('disablediv');

						$j('#dt_giftcard').removeClass('disablediv');
						$j('#dt_method_gift_card').removeClass('disablediv');
						$j('.giftcard-input').removeAttr('disabled');
						$j('.giftcard-button').removeAttr('disabled');
					}
					else {
						var msg = response.error_messages;
						if (Object.isArray(msg)) {
							msg = msg.join("\n").stripTags().toString();
						}
						if (msg) {
							alert(msg);
						}
						
						$j(obj).removeAttr('checked');
					}
					
					$j('#loading-mask').hide();
				});
			}		
		}
		
		// All CGV Points
		function allpoints(obj) 
		{
			if($j(obj).prop('checked') == true){
				var current_point = parseInt("0");
				if(grandtotal/1000 > 20) {
					if (current_point< (grandtotal/1000)){
						$j('input[name=\'points\']').val(current_point);
					}else{
						$j('input[name=\'points\']').val((grandtotal/1000) + (pointsdisount/1000));
					}
					
					$j('.points-button').click();
					//$j(obj).attr('disabled','disabled');
				}
				else {
					alert('Min value is 20.');
				}
			}else{
				$j('#cgv:points').val(0);
				$j('.points-button').click();
			}
		}
		
		// CGV Gift Card	
		function giftcard(card,obj) 
		{
			var _points = parseInt($j('input[name=\'points\']').val().trim());
			var _balance = parseInt($j('input[name=\'giftcard\']').val().trim());			
			if($j(obj).hasClass('apply')) {
				// Giftcard min value policy
				if(_balance < 1000) {
					alert('Too small value.');
					$j('.allgiftcard').removeAttr('checked');
				}
				else {
					var giftmax = 0;
					if(_balance>giftmax){
						alert('Gift amount must be less than your current giftcard amount.');return;
						$j('.allgiftcard').removeAttr('checked');
					}
					$j.ajax({
						type: 'POST',
						url: 'https://www.cgv.vn/default/cinox/discount/giftcardMethod/',
						data: {points : _points, giftcard : card,  balance : _balance },
						dataType: 'json',
						beforeSend: function(){
							$j('#loading-mask').show();
						}
					}).done(function(response) {
						if (response.redirect) {
							location.reload();
							return;
						}
						if (response.success) {
							sutotal = parseInt(response.sutotal);
							egiftdisount = parseInt(response.egift);
							giftcarddisount = parseInt(response.giftcard);
							grandtotal = parseInt(response.remain);
							const totalDiscount = pointsdisount + egiftdisount + giftcarddisount + coupondisount + voucherdisount + vitcarddisount + campaigndisount;
							//$j('.discount-giftcard-item').remove();
							if($j(".discount-giftcard-item")[0]){$j(".discount-giftcard-item").html('');}
							var html = '<tr class="discount-giftcard-item"><td>Thẻ Quà Tặng</td><td>'+formatCurrency(giftcarddisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1})+'</td></tr>';
							$j(html).appendTo('.chosen-discount tbody');
							$j('.discount-chose-giftcard .price').text(formatCurrency(giftcarddisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
							$j('.chosen-discount .price').text('-'+formatCurrency(totalDiscount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
							$j('.chosen-payment .price').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
							$j('.lastdiscount').text(formatCurrency(totalDiscount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
							$j('.lastprice').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));

							if(grandtotal == 0) {
								$j('#opc-2').addClass('disablediv');
								$j('#dt_method_2').addClass('disablediv');
								$j('#dt_method_3').addClass('disablediv');
								$j('#dt_method_4').addClass('disablediv');
								$j('#dt_method_5').addClass('disablediv');
								$j('#dt_method_6').addClass('disablediv');
								
								$j('.points-input').attr('disabled','disabled');
								$j('.points-button').attr('disabled','disabled');
								
								$j('#dt_method_gift_card').addClass('disablediv');
								$j(obj).removeClass('apply');
								$j(obj).addClass('cancel');
								$j(obj).text('Hủy');
							}else{
								$j('#dt_method_gift_card').removeClass('disablediv');
							}
						}
						else {
							var msg = response.error_messages;
							if (Object.isArray(msg)) {
								msg = msg.join("\n").stripTags().toString();
							}
							if (msg) {
								alert(msg);
							}
						}
						
						$j('#loading-mask').hide();
					});
				}
			}
			else {
				$j.ajax({
					url: 'https://www.cgv.vn/default/cinox/discount/cancelgiftcardmethod/',
					dataType: 'json',
					beforeSend: function(){
						$j('#loading-mask').show();
					}
				}).done(function(response) {
					if (response.redirect) {
						location.reload();
						return;
					}
					if (response.success) {
						sutotal = parseInt(response.sutotal);
						giftcarddisount = parseInt(response.discount);
						grandtotal = parseInt(response.remain);
						
						$j('.discount-chose-giftcard .price').text(formatCurrency(giftcarddisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.chosen-discount .price').text(formatCurrency(sutotal - grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.chosen-payment .price').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.lastdiscount').text(formatCurrency(sutotal - grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.lastprice').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('input[name=\'giftcard\']').val(0);
						$j('.discount-giftcard-item').remove();
						$j('.allgiftcard').removeAttr('checked');
						$j('.allgiftcard').removeAttr('disabled');
						
						$j(obj).removeClass('cancel');
						$j(obj).addClass('apply');
						$j(obj).text('Sử dụng');
						
						$j('#opc-2').removeClass('disablediv');
						$j('#dt_method_2').removeClass('disablediv');
						$j('#dt_method_3').removeClass('disablediv');
						$j('#dt_method_4').removeClass('disablediv');
						$j('#dt_method_5').removeClass('disablediv');
						
						$j('.points-input').removeAttr('disabled');
						$j('.points-button').removeAttr('disabled');
					}
					else {
						var msg = response.error_messages;
						if (Object.isArray(msg)) {
							msg = msg.join("\n").stripTags().toString();
						}
						if (msg) {
							alert(msg);
						}
						
						$j(obj).removeAttr('checked');
					}
					
					$j('#loading-mask').hide();
				});			
			}
		}
		
		// All CGV Gift Card
		function allgiftcard(obj) 
		{
			//console.log(grandtotal);
			//console.log(sutotal);
			var current_gftcard = parseInt("0");
			if(grandtotal >= 1000) {
				if(current_gftcard<grandtotal){
					$j('input[name=\'giftcard\']').val(current_gftcard);
				}else{
					$j('input[name=\'giftcard\']').val(grandtotal + giftcarddisount);
				}
				$j('.giftcard-button').click();
				$j(obj).attr('disabled','disabled');
			}
			else {
				alert('Too small value.');
			}
		}
		
		// CGV Discount Coupon
		function coupon(obj) 
		{
			var cpn = [];
			var dsc = [];
			var i = j = 0;
			$j('.checkbox-coupon').each( function () {
				if($j(this).prop('checked') == true) {
					if($j(this).attr('name') == 'coupon[cpn]') {
						cpn[i] = $j(this).val();
						i++;
					}
					else {
						dsc[j] = $j(this).val();
						j++;
					}				
				}
			});
			
			if(cpn.size() > 0 || dsc.size() > 0) {
				$j.ajax({
					type: 'POST',
					url: 'https://www.cgv.vn/default/cinox/sales/coupon/',
					data: {cpn : cpn, dsc : dsc },
					dataType: 'json',
					beforeSend: function(){
						$j('#loading-mask').show();
					}
				}).done(function(response) {
					if (response.redirect) {
						location.reload();
						return;
					}
					if (response.success) {
						var msg = response.notify;
						if (Object.isArray(msg)) {
							msg = msg.join("\n").stripTags().toString();
						}
						if (msg) {
							alert(msg);
						}
						
						sutotal = parseInt(response.sutotal);
						coupondisount = parseInt(response.discount);
						grandtotal = parseInt(response.remain);
						voucherdisount = 0;
						vitcarddisount = 0;
						pointsdisount = 0;
						partnerdisount = 0;
						campaigndisount = 0;
						
						$j('.discount-coupon-item').remove();
						$j('.discount-giftcard-item').remove();
						$j('.discount-egiftcard-item').remove();
						$j('.discount-giftcard-item').remove();
						$j('.discount-egiftcard-item').remove();
						$j('.gift-card-checkbox input').prop('checked', false);
						var html = '<tr class="discount-coupon-item"><td>Coupon</td><td>'+formatCurrency(coupondisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1})+'</td></tr>';
						$j('.chosen-discount tbody').html(html);
						$j('.discount-chose-coupon .price').text(formatCurrency(coupondisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));

						$j('.chosen-discount .price').text('-'+formatCurrency(coupondisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.chosen-payment .price').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.lastdiscount').text(formatCurrency(coupondisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.lastprice').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						// Reset voucher, Partnership,
						$j('input[name=\'voucher[]\']').removeAttr('checked');
						$j('input[name=\'partner[]\']').removeAttr('checked');
						$j('input[name=\'giftcard\']').val(0);
						$j('.discount-chose-giftcard .price').text(formatCurrency(0, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.gift-card-checkbox input').prop('checked', false);

						if(grandtotal === 0) {
							$j('#opc-0').addClass('disablediv');
							$j('#opc-2').addClass('disablediv');
							$j('#dt_method_1').addClass('disablediv');
							$j('#dt_method_2').addClass('disablediv');
							$j('#dt_method_3').addClass('disablediv');
							$j('#dt_method_4').addClass('disablediv');
							$j('#dt_method_5').addClass('disablediv');
							$j('#dt_method_6').addClass('disablediv');

							$j('.points-input').attr('disabled','disabled');
							$j('.points-button').attr('disabled','disabled');

							$j('.giftcard-input').attr('disabled','disabled');
							$j('.giftcard-button').attr('disabled','disabled');
						}else{
							$j('#opc-0').removeClass('disablediv');
							$j('#opc-2').removeClass('disablediv');
							$j('#dt_method_1').addClass('disablediv');
							$j('#dt_method_2').removeClass('disablediv');
							$j('#dt_method_3').addClass('disablediv');
							$j('#dt_method_4').addClass('disablediv');
							$j('#dt_method_5').addClass('disablediv');
							$j('#dt_method_6').addClass('disablediv');

							$j('.points-input').attr('disabled','disabled');
							$j('.points-button').attr('disabled','disabled');
							$j('#dt_giftcard').removeClass('disablediv');
							$j('#dt_method_gift_card').removeClass('disablediv');
						}
					}
					else {
						var msg = response.error_messages;
						if (Object.isArray(msg)) {
							msg = msg.join("\n").stripTags().toString();
						}
						if (msg) {
							alert(msg);
						}
						
						$j(obj).removeAttr('checked');
					}				
					
					$j('#loading-mask').hide();
				});
			}
			else {
				reset();
				//$j('.discount-coupon-item').remove();
				
				//$j('.chosen-discount .price').text(formatCurrency(0, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				//$j('.chosen-payment .price').text(formatCurrency(sutotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				var discount_amt = init_amt - grandtotal - coupondisount;
				$j('.discount-coupon-item').remove();
				//$j('.chosen-discount .price').text(formatCurrency(grandtotal - voucherdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				$j('.chosen-discount .price').text(formatCurrency(discount_amt, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				$j('.chosen-payment .price').text(formatCurrency(grandtotal + coupondisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				//$j('.lastdiscount').text(formatCurrency(grandtotal - voucherdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				$j('.lastdiscount').text(formatCurrency(discount_amt, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				$j('.lastprice').text(formatCurrency(grandtotal + coupondisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				$j('input[name=\'giftcard\']').val(0);
				$j('.discount-chose-giftcard .price').text(formatCurrency(0, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				$j('.gift-card-checkbox input').prop('checked', false);
				if(discount_amt == 0 && vitcarddisount == 0 && pointsdisount == 0 && giftcarddisount==0 && voucherdisount == 0 && partnerdisount == 0 && campaigndisount == 0){
					$j('#opc-0').removeClass('disablediv');
					$j('#opc-2').removeClass('disablediv');
					$j('#dt_method_1').removeClass('disablediv');
					$j('#dt_method_2').removeClass('disablediv');
					$j('#dt_method_3').removeClass('disablediv');
					$j('#dt_method_4').removeClass('disablediv');
					$j('#dt_method_5').removeClass('disablediv');
					$j('#dt_method_6').removeClass('disablediv');
					$j('#dt_giftcard').removeClass('disablediv');
					$j('#dt_method_gift_card').removeClass('disablediv');

					$j('.points-input').removeAttr('disabled');
					$j('.points-button').removeAttr('disabled');

					$j('.giftcard-input').removeAttr('disabled');
					$j('.giftcard-button').removeAttr('disabled');
				}else{
					$j('#opc-0').removeClass('disablediv');
					$j('#opc-2').removeClass('disablediv');
					$j('#dt_method_1').removeClass('disablediv');
					$j('#dt_method_2').removeClass('disablediv');
					$j('#dt_method_3').removeClass('disablediv');
					$j('#dt_method_4').removeClass('disablediv');
					$j('#dt_method_5').removeClass('disablediv');
					$j('#dt_method_6').removeClass('disablediv');
					$j('#dt_giftcard').removeClass('disablediv');
					$j('#dt_method_gift_card').removeClass('disablediv');

					$j('.giftcard-input').removeAttr('disabled');
					$j('.giftcard-button').removeAttr('disabled');
				}
			}
		}
		
		// CGV Voucher
		function voucher(obj) 
		{		
			var i = 0;
			var voucher = [];
			$j('input[name=\'voucher[]\']').each( function () {
				if($j(this).prop('checked') == true) {
					voucher[i] = {'kncd': $j(this).attr('attr-kndcd'), no: $j(this).val()};
					i++;
				}
			});
			
			if(voucher.size() > 0) {
				$j.ajax({
					type: 'POST',
					url: 'https://www.cgv.vn/default/cinox/sales/voucher/',
					data: {voucher : voucher },
					dataType: 'json',
					beforeSend: function(){
						$j('#loading-mask').show();
					}
				}).done(function(response) {
					if (response.redirect) {
						location.reload();
						return;
					}
					if (response.success) {
						var msg = response.notify;
						if (Object.isArray(msg)) {
							msg = msg.join("\n").stripTags().toString();
						}
						if (msg) {
							alert(msg);
						}

						sutotal = parseInt(response.sutotal);
						voucherdisount = parseInt(response.discount);
						grandtotal = parseInt(response.remain);
						coupondisount = 0;
						vitcarddisount = 0;
						pointsdisount = 0;
						partnerdisount = 0;
						campaigndisount = 0;

						$j('.discount-voucher-item').remove();
						$j('.discount-giftcard-item').remove();
						$j('.discount-egiftcard-item').remove();
						$j('.gift-card-checkbox input').prop('checked', false);
						var html = '<tr class="discount-voucher-item"><td>Voucher</td><td>'+formatCurrency(voucherdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1})+'</td></tr>';
						$j(html).appendTo('.chosen-discount tbody');
						$j('.discount-chose-voucher .price').text(formatCurrency(voucherdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));

						var dis = voucherdisount + coupondisount;
						$j('.chosen-discount .price').text('-'+formatCurrency(dis, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.chosen-payment .price').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.lastdiscount').text(formatCurrency(dis, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.lastprice').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.discount-chose-giftcard .price').text(formatCurrency(0, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('input[name=\'giftcard\']').val(0);
						$j('.discount-chose-giftcard .price').text(formatCurrency(0, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
						$j('.gift-card-checkbox input').prop('checked', false);
						
						if(grandtotal === 0) {
							$j('#opc-0').addClass('disablediv');
							$j('#opc-2').addClass('disablediv');
							$j('#dt_method_1').addClass('disablediv');
							$j('#dt_method_2').addClass('disablediv');
							$j('#dt_method_3').addClass('disablediv');
							$j('#dt_method_4').addClass('disablediv');
							$j('#dt_method_5').addClass('disablediv');
							$j('#dt_method_6').addClass('disablediv');
							$j('#dt_giftcard').addClass('disablediv');
							$j('#dt_method_gift_card').addClass('disablediv');

							$j('.points-input').attr('disabled','disabled');
							$j('.points-button').attr('disabled','disabled');

							$j('.giftcard-input').attr('disabled','disabled');
							$j('.giftcard-button').attr('disabled','disabled');
						}else{
							$j('#opc-0').removeClass('disablediv');
							$j('#opc-2').removeClass('disablediv');
							$j('#dt_method_1').removeClass('disablediv');
							$j('#dt_method_2').addClass('disablediv');
							$j('#dt_method_3').addClass('disablediv');
							$j('#dt_method_4').addClass('disablediv');
							$j('#dt_method_5').addClass('disablediv');
							$j('#dt_method_6').addClass('disablediv');

							$j('.points-input').attr('disabled','disabled');
							$j('.points-button').attr('disabled','disabled');
							$j('#dt_giftcard').removeClass('disablediv');
							$j('#dt_method_gift_card').removeClass('disablediv');
						}
						
						if (typeof response.paymentMethod !== 'undefined' && response.paymentMethod === 'onepayquocte') {
							$j('#opc-0').addClass('disablediv');
							$j('#p_method_onepay').addClass('disablediv');
							$j("dt[id^='dt_method_']:not(#dt_method_onepayquocte)").addClass('disablediv');
							
							$j('#dt_giftcard').addClass('disablediv');
							$j('#dt_method_gift_card').addClass('disablediv');

							$j('.points-input').attr('disabled','disabled');
							$j('.points-button').attr('disabled','disabled');

							$j('.giftcard-input').attr('disabled','disabled');
							$j('.giftcard-button').attr('disabled','disabled');
						    }
					}
					else {
						var msg = response.error_messages;
						if (Object.isArray(msg)) {
							msg = msg.join("\n").stripTags().toString();
						}
						if (msg) {
							alert(msg);
						}
						
						$j(obj).removeAttr('checked');
					}				
					
					$j('#loading-mask').hide();
				});
			}else{
				reset();
				var discount_amt = init_amt - grandtotal - voucherdisount;
				$j('.discount-voucher-item').remove();
				//$j('.chosen-discount .price').text(formatCurrency(grandtotal - voucherdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				$j('.chosen-discount .price').text(formatCurrency(discount_amt, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				$j('.chosen-payment .price').text(formatCurrency(grandtotal + voucherdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				//$j('.lastdiscount').text(formatCurrency(grandtotal - voucherdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				$j('.lastdiscount').text(formatCurrency(discount_amt, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				$j('.lastprice').text(formatCurrency(grandtotal + voucherdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
				if(discount_amt == 0 && vitcarddisount == 0 && pointsdisount == 0 && giftcarddisount==0 && coupondisount == 0 && partnerdisount == 0 && campaigndisount == 0){
					$j('#opc-0').removeClass('disablediv');
					$j('#opc-2').removeClass('disablediv');
					$j('#dt_method_1').removeClass('disablediv');
					$j('#dt_method_2').removeClass('disablediv');
					$j('#dt_method_3').removeClass('disablediv');
					$j('#dt_method_4').removeClass('disablediv');
					$j('#dt_method_5').removeClass('disablediv');
					$j('#dt_method_6').removeClass('disablediv');
					$j('#dt_giftcard').removeClass('disablediv');
					$j('#dt_method_gift_card').removeClass('disablediv');

					$j('.points-input').removeAttr('disabled');
					$j('.points-button').removeAttr('disabled');

					$j('.giftcard-input').removeAttr('disabled');
					$j('.giftcard-button').removeAttr('disabled');
				}else{
					$j('#opc-0').removeClass('disablediv');
					$j('#opc-2').removeClass('disablediv');
					$j('#dt_method_1').removeClass('disablediv');
					$j('#dt_giftcard').removeClass('disablediv');
					$j('#dt_method_gift_card').removeClass('disablediv');

					$j('.giftcard-input').removeAttr('disabled');
					$j('.giftcard-button').removeAttr('disabled');
				}
			}
		}
		
		// Partnership payment				
		function partner(code, obj) 
		{
			var pin = '';
			var partnership = $j('input[name=partner\\['+code+'\\]]').val();
			//check mastercard
			var partnership_type = code;
			if(partnership_type.toLocaleLowerCase().indexOf("master")!=-1){
				$j('.cgv-master').addClass('disablediv');
				code = 'master';
			}
			//end check mastercard
			//check vpb
			if($j('input[name=code\\['+code+'\\]]')) {
				if($j('input[name=code\\['+code+'\\]]').val() == '') {
					var msg = 'Verify code is a required field.';
					alert(msg);
					return false;
				} else {
					pin = $j('input[name=code\\['+code+'\\]]').val();
				}			
			}
			if(code=='vpb1' || code=='vpb2' || code=='vpb3')
				code = 'vpb';
			
			$j('input[name=\'voucher[]\']').prop('checked', false);
			$j('input[name=\'coupon[]\']').prop('checked', false);
			
			$j('#dt_method_1').removeClass('disablediv');
			$j('#dt_method_2').removeClass('disablediv');
			$j('#dt_method_3').removeClass('disablediv');
			$j('#dt_method_5').removeClass('disablediv');
			$j('#dt_method_onepay').removeClass('disablediv');
			$j('#dt_method_onepayquocte').removeClass('disablediv');
			// reset another discount method
			$j('input[name=\'points\']').val(0);
			pointsdisount = 0;
			$j('input[name=\'giftcard\']').val(0);
			giftcarddisount = 0;
			
			vitcarddisount = 0;
			coupondisount = 0;
			voucherdisount = 0;
			
			$j('.chosen-discount tbody').empty();
			
			$j.ajax({
				type: 'POST',
				url: 'https://www.cgv.vn/default/cinox/sales/partnership/',
				data: {partnership : partnership, pin: pin, type : code},
				dataType: 'json',
				beforeSend: function(){$j('#loading-mask').show();}
			}).done(function(response) {
				if (response.redirect) {
					location.reload();
					return;
				}
				
				if (response.success) {
					var msg = response.notify;
					if (Object.isArray(msg)) {
						msg = msg.join("\n").stripTags().toString();
					}
					if (msg) {
						$j(obj).addClass('disablediv');
						alert(msg);
					}
					
					sutotal = parseInt(response.sutotal);
					partnerdisount = parseInt(response.discount);
					grandtotal = parseInt(response.remain);
					if( (partnership==='20007542' || partnership==='20007562' ) && response.remain===0){
						$j('#dt_method_onepayquocte').addClass('disablediv');
					}
	$j('#opc-0').addClass('disablediv');
					$j('#dt_method_1').addClass('disablediv');
					$j('#dt_method_2').addClass('disablediv');
					$j('#dt_method_3').addClass('disablediv');
					$j('#dt_method_5').addClass('disablediv');
					$j('#dt_method_6').addClass('disablediv');
					$j('#dt_giftcard').addClass('disablediv');
					$j('#dt_method_gift_card').addClass('disablediv');
					$j('#dt_method_momo').addClass('disablediv');
					$j('#dt_method_zalo_pay').addClass('disablediv');
					$j('#dt_method_airpay').addClass('disablediv');
					$j('#dt_method_onepay').addClass('disablediv');
					$j('#dt_method_viettel').addClass('disablediv');
					$j('#dt_method_vnpay').addClass('disablediv');
					$j('#dt_method_vinidpay').addClass('disablediv');
					$j('#dt_method_shopeepay').addClass('disablediv');
					
					var html = '<tr><td>Partnership</td><td>'+formatCurrency(partnerdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1})+'</td></tr>';
					$j('.chosen-discount tbody').html(html);
					$j('.discount-giftcard-item').remove();
					$j('.discount-egiftcard-item').remove();
					$j('.chosen-discount .price').text('-'+formatCurrency(partnerdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
					$j('.chosen-payment .price').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
					$j('.lastdiscount').text(formatCurrency(partnerdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
					$j('.lastprice').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
					$j('input[name=\'giftcard\']').val(0);
					$j('.discount-chose-giftcard .price').text(formatCurrency(0, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
					$j('.gift-card-checkbox input').prop('checked', false);
				}
				else {
					var msg = response.error_messages;
					if (Object.isArray(msg)) {
						msg = msg.join("\n").stripTags().toString();
					}
					if (msg) {
						$j(obj).addClass('disablediv');
						alert(msg);
					}
					
					$j(obj).prop('checked', false);
				}
				
				$j('#loading-mask').hide();
			});
		}
		// campaign payment				
		function campaign(code, obj) 
		{
			var pin = '';
			var campaigncode = $j('input[name=campaign\\['+code+'\\]]').val();
			if($j('input[name=code\\['+code+'\\]]')) {
				if($j('input[name=code\\['+code+'\\]]').val() == '') {
					var msg = 'Verify code is a required field.';
					alert(msg);
					return false;
				} else {
					pin = $j('input[name=code\\['+code+'\\]]').val();
				}			
			}
			
			$j('input[name=\'voucher[]\']').prop('checked', false);
			$j('input[name=\'coupon[]\']').prop('checked', false);
			
			$j('#dt_method_1').removeClass('disablediv');
			$j('#dt_method_2').removeClass('disablediv');
			$j('#dt_method_3').removeClass('disablediv');
			$j('#dt_method_4').removeClass('disablediv');
			$j('#dt_method_onepay').removeClass('disablediv');
			
			// reset another discount method
			$j('input[name=\'points\']').val(0);
			pointsdisount = 0;
			$j('input[name=\'giftcard\']').val(0);
			giftcarddisount = 0;
			
			vitcarddisount = 0;
			coupondisount = 0;
			voucherdisount = 0;
			
			$j('.chosen-discount tbody').empty();
			$j.ajax({
				type: 'POST',
				url: 'https://www.cgv.vn/default/cinox/sales/campaign/',
				data: {campaign : code, pin: pin, type : campaigncode},
				dataType: 'json',
				beforeSend: function(){$j('#loading-mask').show();}
			}).done(function(response) {
				if (response.redirect) {
					location.reload();
					return;
				}
				
				if (response.success) {
					$j(obj).addClass('disablediv');
					$j('.campaign').addClass('disablediv');

					$j('input[name=code\\[promo\\]]').addClass('disablediv');
					sutotal = parseInt(response.sutotal);
					partnerdisount = parseInt(response.discount);
					grandtotal = parseInt(response.remain);
					
					$j('#dt_method_1').addClass('disablediv');
					$j('#dt_method_2').addClass('disablediv');
					$j('#dt_method_3').addClass('disablediv');
					$j('#dt_method_4').addClass('disablediv');
					/*$j('#dt_method_momo').addClass('disablediv');
					$j('#dt_method_zalo_pay').addClass('disablediv');
					$j('#dt_method_airpay').addClass('disablediv');
					//$j('#dt_method_onepay').addClass('disablediv');
					
					
					if(grandtotal>0){
						$j('#dt_method_onepay').removeClass('disablediv');
						$j('#dt_method_onepayquocte').removeClass('disablediv');
					}*/
					// filter payment method
					$j('.sp-methods dt').addClass('disablediv');
					if(response.payment=='all'){
						/*for (i in response.payment) {
							$j('.sp-methods #dt_method_'+response.payment[i].method).removeClass('disablediv');
						}*/
						$j('.sp-methods dt').removeClass('disablediv');
						//console.log(countItems('checkout-payment-method-load'));
					}else{
						$j('.sp-methods #dt_method_'+response.payment).removeClass('disablediv');
					}

					//$j('#dt_method_momo').addClass('disablediv');
					//$j('#dt_method_zalo_pay').addClass('disablediv');
					//$j('#dt_method_airpay').addClass('disablediv');
					//$j('#dt_method_onepay').addClass('disablediv');
					campaigndisount = partnerdisount;
					var html = '<tr><td>Mã Khuyến Mãi</td><td>'+formatCurrency(partnerdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1})+'</td></tr>';
					$j('.chosen-discount tbody').html(html);
					$j('.discount-giftcard-item').remove();
					$j('.discount-egiftcard-item').remove();
					$j('.chosen-discount .price').text('-'+formatCurrency(partnerdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
					$j('.chosen-payment .price').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
					$j('.lastdiscount').text(formatCurrency(partnerdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
					$j('.lastprice').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
					$j('input[name=\'giftcard\']').val(0);
					$j('.discount-chose-giftcard .price').text(formatCurrency(0, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
					$j('.gift-card-checkbox input').prop('checked', false);
				}
				else {
					var msg = response.error_messages;
					if (Object.isArray(msg)) {
						msg = msg.join("\n").stripTags().toString();
					}
					if (msg) {
						//$j(obj).addClass('disablediv');
						alert(msg);
					}
					
					$j(obj).prop('checked', false);
				}
				
				$j('#loading-mask').hide();
			});
		}
		// External payment method
		var payment = 'free';
		function externalpayment(obj) 
		{
			var payments = $j('.sp-methods input');
			if(payments.is(':checked')) {
				var html = '<tr><td>'+obj.title+'</td><td>'+formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1})+'</td></tr>';
				$j('.chosen-payment tbody').html(html);
				payment = obj.value;
				if(payment=='momo'){
					momoclicked = true;
					//reset();
				}
				if(payment=='zalo_pay'){
					zaloclicked = true;
					//reset();
				}
				if(payment=='airpay'){
					airpayclicked = true;
					//reset();
				}
				
				if(payment=='shopeepay'){
					shopeepayclicked = true;
					//reset();
				}
				$j('#checkout-payment-method-load .form-list').hide();
				var block = 'payment_form_' + payment;
				[block + '_before', block, block + '_after'].each(function(el) {
					element = $(el);
					if (element) {
						element.style.display = (false) ? 'none' : '';
						element.select('input', 'select', 'textarea', 'button').each(function(field) { field.disabled = false; });
					}
				});
			}
			else {
				alert('Please agree to the Terms and Conditions!');
			}
		}

		let giftCardDiv = document.querySelector('.gift-card');
		if (giftCardDiv != null) {
			let radioButtons = giftCardDiv.querySelectorAll('input[type="radio"]');
			radioButtons.forEach(function(radioButton) {
				radioButton.addEventListener('change', function () {
					if (this.checked) {
						const points = parseInt($j('input[name=\'points\']').val().trim());
						const giftCardNumber = this.getAttribute('data-card-number');
						const amount = this.getAttribute('data-amount');
						$j.ajax({
							type: 'POST',
							url: 'https://www.cgv.vn/default/gift/checkout/discountByGiftCard/',
							dataType: 'json',
							data: {
								points : points,
								giftcard : giftCardNumber,
								balance : amount
							},
							dataType: 'json',
							beforeSend: function(){
								$j('#loading-mask').show();
							}
						}).done(function(response) {
							if (response.redirect) {
								location.reload();
								return;
							}
							if (response.success) {
								sutotal = parseInt(response.sutotal);
								egiftdisount = parseInt(response.egift);
								giftcarddisount = parseInt(response.giftcard);
								grandtotal = parseInt(response.remain);
								egiftcarddisount = egiftdisount;
								let totalDiscount = pointsdisount + egiftdisount + giftcarddisount + coupondisount + voucherdisount + vitcarddisount + campaigndisount;
								$j('.discount-egiftcard-item').remove();
								let html = '<tr class="discount-egiftcard-item"><td>CGV eGift</td><td>' + formatCurrency(egiftdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}) + '</td></tr>';
								if (parseInt(response.coupon) !== 0) {
								    coupondisount = parseInt(response.coupon)
								    totalDiscount += coupondisount;
								    html += '<tr class="discount-coupon-item"><td>Coupon</td><td>'+formatCurrency(coupondisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1})+'</td></tr>';
								    $j('.discount-chose-coupon .price').text(formatCurrency(coupondisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
								    $j('.chosen-discount .price').text('-'+formatCurrency(coupondisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
								}

								$j(html).appendTo('.chosen-discount tbody');
								//$j('.discount-chose-giftcard .price').text(formatCurrency(egiftdisount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
								$j('.chosen-discount .price').text('-'+formatCurrency(totalDiscount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
								$j('.chosen-payment .price').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
								$j('.lastdiscount').text(formatCurrency(totalDiscount, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));
								$j('.lastprice').text(formatCurrency(grandtotal, {"pattern":"%s\u00a0\u20ab","precision":2,"requiredPrecision":2,"decimalSymbol":",","groupSymbol":".","groupLength":3,"integerRequired":1}));

								//const disabledivElements = ['#dt_method_4', '#dt_method_5'];
								const disabledivElements = ['#dt_method_5'];

								disabledivElements.forEach(function(elementId) {
									const element = $j(elementId);
									element.addClass('disablediv');
									if (grandtotal === 0) {
										$j('#opc-2').addClass('disablediv');
										$j('#dt_giftcard').addClass('disablediv');
									} else {
										$j('#dt_giftcard').removeClass('disablediv');
										//$j('#opc-2').addClass('disablediv');
									}
								});

								$j('.points-input, .points-button').prop('disabled', grandtotal === 0);
							}
							else {
								$j('.gift-card-checkbox input').prop('checked', false);
								var msg = response.error_messages;
								if (Object.isArray(msg)) {
									msg = msg.join("\n").stripTags().toString();
								}
								if (msg) {
									alert(msg);
								}
							}
							$j('#loading-mask').hide();
						});
					}
				})
			})
		}
		
		// Process to payment
		function process(obj) 
		{
			var checkagreement = $j('#checkoutSteps input[class=iaccept]');
			if(checkagreement.is(':checked')) {
				var statuscheck = false;
				if(grandtotal > 0) {
					$j('input[name=\'payment[method]\']').each( function () {
						if($j(this).prop('checked') == true){
							statuscheck = true;
							return true;
						}
					});
					
					if(statuscheck == true) {
						if(otp_send===0){
							$j.ajax({
								type: 'POST',
								url: 'https://www.cgv.vn/default/cinox/order/external/',
								data: {payment : payment , site: '008', seq: 11372924, seats:  [{"SALE_SEAT_SEQ":1,"SCN_SCH_SEQ":"11372924","SEAT_GRD_CD":"01","SEAT_TRTR_CD":"02","SEAT_LOC_NO":"00500701","ROW_NM":"STD","SEAT_NO":"D9","STD_AMT":100000,"SALE_AMT":100000,"SALE_PRC":100000,"RL_SALE_AMT":100000,"SCN_AMT":100000,"SVC_AMT":0,"TKT_KND_CD":"01","TKT_PRT_STATUS_CD":"02","TCKT_KND_CD":"01"},{"SALE_SEAT_SEQ":2,"SCN_SCH_SEQ":"11372924","SEAT_GRD_CD":"01","SEAT_TRTR_CD":"02","SEAT_LOC_NO":"00500801","ROW_NM":"STD","SEAT_NO":"D8","STD_AMT":100000,"SALE_AMT":100000,"SALE_PRC":100000,"RL_SALE_AMT":100000,"SCN_AMT":100000,"SVC_AMT":0,"TKT_KND_CD":"01","TKT_PRT_STATUS_CD":"02","TCKT_KND_CD":"01"}],otp:otp_input},
								dataType: 'json',
								beforeSend: function(){
									$j('#loading-mask').show();
								}
							}).done(function(response) {
								$j('#loading-mask').hide();
								otpTimer(30);
								if (response.success===false) {
										var msg = response.error_messages;
										if (Object.isArray(msg)) {
											msg = msg.join("\n").stripTags().toString();
										}
										if (response.otp === undefined){
											if (msg) {
												$j("#otp_confirm").css({"color":"#fff","background-color":"grey"});
												$j('#otp').val('');
												$j('.otp_pin_error').text(msg);
												document.getElementById("otp").disabled = true;
												document.getElementById("otp_confirm").disabled = true;
												alert(msg);
												return;
											}
											$j('#loading-mask').hide();
										//if (!$j.trim(response.otp)){
										}else{
											modal.style.display = "block";
											$j('#otp').focus();
											if (response.verify_otp === undefined){

												$j('.otp_content').html(msg);
												otp_msg = msg;
												otp_send = 1;
											}else{
												$j('.otp_pin_error').text(msg);
												$j('#otp').val('');
												document.getElementById("otp").disabled = true;
												$j("#otp_confirm").css({"color":"#fff","background-color":"grey"});
												document.getElementById("otp_confirm").disabled = true;
											}
											$j('#loading-mask').hide();
											return;								
										}
									}
									/*tam,.ngo@cj.net added  */
								if(payment=='zalo_pay'){
									if (response.success) { 
										var device = isMobile();
										var url_web_to_app = '';
										if(device==true){
											mobile_device = 1;
										}else{
											mobile_device = 0;
										}
										$j.ajax({
											url: 'https://www.cgv.vn/default/cinox/order/redirectUrlZalo',
											type: 'POST',
											data: {order_id: response.orderId, mobile_device : mobile_device},
											dataType: 'json',
											success: function(res) {
												if(res.success){
													location.href = res.content;
													window.location = res.content;
													return;
												}
												else {
													html = res.error_messages;
												}
												return;
											}
										});
									}
									else {
										var msg = response.error_messages;
										if (Object.isArray(msg)) {
											msg = msg.join("\n").stripTags().toString();
										}
										if (msg) {
											alert(msg);
										}
										$j('#loading-mask').hide();
										location.href = encodeURI(response.redirect);
										return;
									}
								}else if(payment=='airpay'){
									
									if (response.success && response.airpay.success==true) {
										var landing_url = response.airpay.url;
										window.location = landing_url;
										return;
									}
									else {
										var msg = response.error_messages;
										if (Object.isArray(msg)) {
											msg = msg.join("\n").stripTags().toString();
										}
										if (msg) {
											alert(msg);
										}
										$j('#loading-mask').hide();
										location.href = encodeURI(response.redirect);
										return;
									}
								}else if(payment=='shopeepay'){
									//	console.log(response);return;
									if (response.success && response.success==true) {
										var landing_url = response.url;
										window.location = landing_url;
										return;
									}
									else {
										var msg = response.error_messages;
										if (Object.isArray(msg)) {
											msg = msg.join("\n").stripTags().toString();
										}
										if (msg) {
											alert(msg);
										}
										$j('#loading-mask').hide();
										location.href = encodeURI(response.redirect);
										return;
									}
								}else{
									if (response.redirect) {
										if (response.error_messages) {
											var msg = response.error_messages;
											if (Object.isArray(msg)) {
												msg = msg.join("\n").stripTags().toString();
											}
											if (msg) {
												alert(msg);
											}
										}
										location.href = encodeURI(response.redirect);
										return;
									}
									if (response.success) {
										location.href = encodeURI(response.successUrl);
										return;
									}
									else {
										var msg = response.error_messages;
										if (Object.isArray(msg)) {
											msg = msg.join("\n").stripTags().toString();
										}
										if (msg) {
											alert(msg);
										}
									}
									$j('#loading-mask').hide();
								}
								
							});
						}else{
							$j('.otp_content').html(otp_msg);
							$j('.otp_pin_error').text('');
							modal.style.display = "block";
							otp_send = 1;
							otpTimer(30);
							return;	
						}
					}	
					else {
						alert('Please select a method payment');
					}
				}
				else {
					payment = 'free';
					if(otp_send===0){
						$j.ajax({
							type: 'POST',
							url: 'https://www.cgv.vn/default/cinox/order/internal/',
							data: {payment : payment, site: '008', seq: 11372924, seats:  [{"SALE_SEAT_SEQ":1,"SCN_SCH_SEQ":"11372924","SEAT_GRD_CD":"01","SEAT_TRTR_CD":"02","SEAT_LOC_NO":"00500701","ROW_NM":"STD","SEAT_NO":"D9","STD_AMT":100000,"SALE_AMT":100000,"SALE_PRC":100000,"RL_SALE_AMT":100000,"SCN_AMT":100000,"SVC_AMT":0,"TKT_KND_CD":"01","TKT_PRT_STATUS_CD":"02","TCKT_KND_CD":"01"},{"SALE_SEAT_SEQ":2,"SCN_SCH_SEQ":"11372924","SEAT_GRD_CD":"01","SEAT_TRTR_CD":"02","SEAT_LOC_NO":"00500801","ROW_NM":"STD","SEAT_NO":"D8","STD_AMT":100000,"SALE_AMT":100000,"SALE_PRC":100000,"RL_SALE_AMT":100000,"SCN_AMT":100000,"SVC_AMT":0,"TKT_KND_CD":"01","TKT_PRT_STATUS_CD":"02","TCKT_KND_CD":"01"}],otp:otp_input},
							dataType: 'json',
							beforeSend: function(){
								$j('#loading-mask').show();
							}
						}).done(function(response) {						
							/*if (response.redirect) {
								if (response.error_messages) {
									var msg = response.error_messages;
									if (Object.isArray(msg)) {
										msg = msg.join("\n").stripTags().toString();
									}
									if (msg) {
										alert(msg);
									}
								}
								location.href = encodeURI(response.redirect);
								return;
							}
							if (response.success) {
								location.href = encodeURI(response.successUrl);
								return;
							}
							else {
								var msg = response.error_messages;
								if (Object.isArray(msg)) {
									msg = msg.join("\n").stripTags().toString();
								}
								if (msg) {
									alert(msg);
								}
							}*/
							$j('#loading-mask').hide();
							otpTimer(30);
							if (response.success===false) {
								var msg = response.error_messages;
								if (Object.isArray(msg)) {
									msg = msg.join("\n").stripTags().toString();
								}
								if (response.otp === undefined){
									if (msg) {
										alert(msg);
										$j('#otp').val('');
										document.getElementById("otp").disabled = true;
										$j("#otp_confirm").css({"color":"#fff","background-color":"grey"});
										document.getElementById("otp_confirm").disabled = true;
										return;
									}
								//if (!$j.trim(response.otp)){
								}else{
									modal.style.display = "block";
									$j('#otp').focus();
									if (response.verify_otp === undefined){
										$j('#loading-mask').hide();
										$j('.otp_content').html(msg);
										otp_msg = msg;
										otp_send = 1;
									}else{
										$j('.otp_pin_error').text(msg);
										$j('#otp').val('');
												document.getElementById("otp").disabled = true;
										$j("#otp_confirm").css({"color":"#fff","background-color":"grey"});
											document.getElementById("otp_confirm").disabled = true;
									}
									return;								
								}
							}else if(response.success) {
								location.href = encodeURI(response.successUrl);
								return;
							}
						});
					}else{
						$j('.otp_content').html(otp_msg);
						$j('.otp_pin_error').text('');
						modal.style.display = "block";
						otp_send = 1;
						otpTimer(30);
						return;	
					}
					
				}
			}
			else {
				alert('Vui lòng đồng ý với Điều khoản sử dụng và Mua vé!');
			}
		}
		$j('#otp_confirm').on('click',function(e){
			$j('.otp_pin_error').text('');
			otp_input = $j('#otp').val();
			if($j.isNumeric( $j('#otp').val()) && ($j('#otp').val().length==6)) {
				max_click_start++;
				if(max_click_start<=max_click){
					otp_send = 0;
					process(this);
					e.preventDefault();
				}else{
					alert('You can only click this button 3 times.');
					$j('.otp_pin_error').text('You can only click this button 3 times.');
					$j("#otp_confirm").css({"color":"#fff","cursor":"none"});
					document.getElementById("otp_confirm").disabled = true;
					//document.getElementById("checkoutprocess").disabled = true;
					otp_send = 1;
					$j('#otp').val('');
					return false;
				}
			}else{
				$j('.otp_pin_error').text('Verification code must be Numeric and 6 characters');
				otp_send = 0;
				return;
			}
			
		})
		$j('#otp_resend').on('click',function(e){
			max_click_start = 0;
			$j("#otp_resend").css({"color":"#C1C1C1","cursor":"none"});
			$j("#otp_confirm").css({"color":"#fff","cursor":"pointer"});
			$j(".otp_resend").css({"color":"#C1C1C1"});
			$j("#otp_resend").attr("disabled", true);
			document.getElementById("otp_confirm").disabled = false;
			otp_input = '';
			otp_send = 0;
			$j('.otp_pin_error').text('');
			process(this);
			e.preventDefault();
		})

		function otpTimer(sec) {

			//document.getElementById("checkoutprocess").disabled = true;
			if (otp_timer) clearInterval(otp_timer);
			otp_timer = setInterval(function() {
			   //$('#timer').text(sec--);
			   sec--;
			   document.getElementById("countdown_otp").textContent = sec;
			   $j("#otp_confirm").css({"color":"#000","cursor":"pointer"});
			   if (sec <= 0) {
					$j("#otp_confirm").css({"color":"#fff","cursor":"pointer","background-color":"#e71a0f"});
					$j('#otp').val('');
					document.getElementById("otp").disabled = false;
					document.getElementById("otp_confirm").disabled = false;
					//document.getElementById("checkoutprocess").disabled = false;
					otp_send = 0;
				   clearInterval(otp_timer);
			   } 
		   }, 1000);
		}
		jQuery("#contact #cancel,#voucherform #cancel,#movieform #cancel,#couponform #cancel,#concessionform #cancel,#coupondiv #cancelcoupon").click(function() {
				jQuery(this).parent().parent().hide();
			});
		
		/* register giftcard*/
		jQuery("#register-giftcard").click(function(event) {
			event.stopPropagation();
			jQuery("#contactdiv").css("display", "block");
		});
		$j(".cgv-giftcardregister").click(function(event) {		
			var gft_no = $j('input[name=\'gft[no]\']').val();
			var gft_pin = $j('input[name=\'gft[pin]\']').val();
			var originalprice = parseInt('200000',10);// get price of all tickets
			var ticketprice = $j.trim($j('.priceticket .price').text().replace(/[^0-9]/gi, ''));
			var gfcbalance = parseInt($j('#balancegiftcard').text().replace(/[^0-9]/gi, ''),10);		
			if(gft_no != '' && gft_pin !='') {
			   $j.ajax({
					type: 'POST',
					url: 'https://www.cgv.vn/default/loyalty/ticket/gfcregisterforpay/',
					data: {gft_no : gft_no, gft_pin : gft_pin,gfcbalance : gfcbalance,priceticket : originalprice},
					dataType: 'json',
					beforeSend: function(){
						$j('#loading-mask').show();
					}
				}).done(function(result) {
					$j('#loading-mask').hide();
					var data=$j.parseJSON(result);
					//data.code=200;
					//data.amount =200000;
					//if(data.code==200){
					if(data.code==0){
						alert('Đăng ký thành công!');
						
						url = 'https://www.cgv.vn/default/cinox/sales/payment/',
						window.location.href = url;	
						//console.log(data);
						var currentgfcbalance = parseInt($j('#balancegiftcard').text().replace(/[^0-9]/gi, ''),10);
						var newgfcbalance = currentgfcbalance+parseInt(data.amount,10);
						$j('#balancegiftcard').text('');
						$j('#balancegiftcard').text(newgfcbalance+' P');
						
						$j("#contact #cancel").click();
						//$j('.pricediscount .price').text(formatNumber(originalprice+',00', ',', '.')+' đ');
						$j('.pricediscount .price').text(formatNumber(data.amount+',00', ',', '.')+' đ');
						//$j('.priceremain .price').text('0,00 đ');
						var updatepricereamin = originalprice - data.amount;
						$j('.priceremain .price').text(formatNumber(updatepricereamin+',00', ',', '.')+' đ');
						
						var discountprice = $j('.pricediscount .price').text().replace(/[^0-9]/gi, '');
						// disable partial payment
						$j('.cgv-method-list').addClass('disablediv');//remove temporarily
						$j('.cgv-method-list#points').removeClass('disablediv');//remove temporarily
						
						$j('button#pointbtn').prop('disabled', true);
						$j('input[name=\'use_all_points\']').prop('checked', false);
						$j('input[name=\'use_all_points\']').prop('disabled', true);
						$j('input[name=\'points\']').val(0);
						
						$j('input[name=\'points\']').prop('disabled', true);
						//$j('input[name=\'giftcard\']').val(originalprice);
						$j('input[name=\'giftcard\']').val(data.amount);
						$j('input[name=\'giftcard\']').prop('disabled', true);			
										
						$j('.cgv-giftcard-discount').text(formatNumber(originalprice+',00', ',', '.'));
						if(ticketprice == discountprice){
							$j('input[name=\'use_all_giftcard\']').prop('checked', true);
							$j('button#register-giftcard').prop('disabled', true);
							$j('input[name=\'use_all_giftcard\']').prop('disabled', true);
							$j('button#gfcardbtn').prop('disabled', true);
							$j('#opc-2').addClass('cgv-nodisplay');
						}
						else{
							//alert('You don\'t have enough amount of money!');
							//$j('#opc-2').addClass('cgv-nodisplay');//disable 05/05/2017 for compound payment
						}
					}else{
						//alert('Giftcard No/Pin is invalid');
						alert(data.error);
						//$j('input[name=\'gft\']').val();
					}
					//$j('.cgv-method-list').click();
				});
			}
		});

		/* register coupon*/
		$j("#register-coupon").click(function(event) {
			event.stopPropagation();
			jQuery("#coupondiv").css("display", "block");
		});
		$j("#register-concessioncoupon").click(function(event) {
			event.stopPropagation();
			jQuery("#coupondiv").css("display", "block");
		});
		
		$j(".cgv-couponregister").click(function(event) {
			var coupon = $j('input[name=\'coupon[no]\']').val();
			// console.log(concession_no);
			var ccsbalance = 0;			
			if(coupon != '') {
				$j.ajax({
					type: 'POST',
					url: 'https://www.cgv.vn/default/loyalty/ticket/ccsregisterforpay/',
					data: {coupon : coupon },
					dataType: 'json',
					beforeSend: function(){
						$j('#loading-mask').show();
					}
				}).done(function(result) {
					var data = $j.parseJSON(result);
					if(data.code==0) {
						alert('Đăng ký thành công!');
						url: 'https://www.cgv.vn/default/cinox/sales/payment/',
						window.location.href = result.redirect;						
					}
					else{
						alert(data.error);
					}
					$j('#loading-mask').hide();
				});
			}
		});
		 
		
		/* register voucher*/
		jQuery("#register-voucher").click(function(event) {
			event.stopPropagation();
			jQuery("#voucherdiv").css("display", "block");
		});
		/* register voucher*/
		jQuery("#register_concessionvoucher").click(function(event) {
			event.stopPropagation();
			jQuery("#voucherdiv").css("display", "block");
		});
		
		$j(".cgv-voucherregister").click(function(event) {
			 var no = $j('input[name=\'voucher[no]\']').val();
			 var pin = $j('input[name=\'voucher[pin]\']').val();
			 if(no !== '' && pin !== '') {
				$j.ajax({
					 type: 'POST',
					 url: 'https://www.cgv.vn/default/cinox/register/voucher/',
					 data: {no : no, pin : pin },
					 dataType: 'json',
					 beforeSend: function(){
						 $j('#loading-mask').show();
					 }
				}).done(function(response) {
					if (response.success) {
						alert('Success registry!');
						var url = 'https://www.cgv.vn/default/cinox/sales/payment/';
						window.location.href = url;
					}
					else {
						var msg = response.error_messages;
						if (Object.isArray(msg)) {
							msg = msg.join("\n").stripTags().toString();
						}
						if (msg) {
							alert(msg);
						}
					}
					
					$j('#loading-mask').hide();
				});
			 }
		 });
		 $j(document).ready(function () {
			//----- OPEN
			$j('[data-popup-open]').on('click', function(e)  {
				var targeted_popup_class = $j(this).attr('data-popup-open');
				$j('[data-popup="' + targeted_popup_class + '"]').fadeIn(350);
				e.preventDefault();
			});
		 
			//----- CLOSE
			$j('[data-popup-close]').on('click', function(e)  {
				var targeted_popup_class = $j(this).attr('data-popup-close');
				$j('[data-popup="' + targeted_popup_class + '"]').fadeOut(350);
				e.preventDefault();
			});
		});
		$j( window ).on('load', function()
		{
			reset();
		});
		function checkPaymentStatus(id, device, query) {
			if (id == "" || id == null || id == undefined) return;
			
			var limit_timeout = null;
			limit_timeout= setTimeout(function(){
			   var params = {
						idz: id, 
						device : device
				};
				$j.ajax({
					type: 'POST',
					url: query,
					data: params,
					dataType: 'json',
				}).done(function(result) {
					if(result.code==200) {
						window.location = result.redirecturl;
						return;
					}else{
						//var errorUrl = 'https://www.cgv.vn/default/checkout/cart/';
						//location.href = errorUrl;
					}
				});
			}, 120000);//110s
				   
		}

		function startTimer(elementId) {
	  var presentTime = document.getElementById(elementId).innerHTML;	  
	  var timeArray = presentTime.split(/[:]+/);
	  var m = timeArray[0];
	  var s = checkSecond((timeArray[1] - 1));
	  if(m==0 && s==0){
	  	document.getElementById(elementId).innerHTML = m + ":" + s;
	  	return;
	  }else{

		  if(s==59)
		  {
		  	m = m-1;
		  }
		  //if(m<0){alert('timer completed')}
		  document.getElementById(elementId).innerHTML = m + ":" + s;
		  setTimeout(startTimer, 1000, elementId);
	  }
	}

	function checkSecond(sec) {
	  if (sec < 10 && sec >= 0) {sec = "0" + sec}; // add zero in front of numbers < 10
	  if (sec < 0) {sec = "59"};
	  return sec;
	}
	//countdown
	// Set the date we're counting down to
var countDownDate = new Date();
countDownDate.setMinutes(countDownDate.getMinutes() + 5);
// Update the count down every 1 second
var x = setInterval(function() {
  // Get todays date and time
  var now = new Date().getTime();

  // Find the distance between now an the count down date
  var distance = countDownDate - now;

  // Time calculations for days, hours, minutes and seconds
  var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  var seconds = Math.floor((distance % (1000 * 60)) / 1000);

  // Display the result in the element with id="demo"
  document.getElementById("countdown").innerHTML = '<div><span class="cgvminutes">' +minutes + '</span>'+ '<div class="smalltext">Minutes</div></div>' + ' <div><span class="cgvseconds">' + seconds + '</span>' + '<div class="smalltext">Seconds</div></div>';

  // If the count down is finished, write some text
  if ((minutes == 0) && (seconds==0)) {
    clearInterval(x);
    $j.ajax({
		type: 'POST',
		url: 'https://www.cgv.vn/default/hello/index/updateclearcart/',
		data: {},
		dataType: 'json',
		beforeSend: function(){
			$j('#loading-mask').show();
		}
	}).done(function(response) {
		//console.log(response);
		if (response.success) {
			//location.href = encodeURI(response.successUrl);
			location.href = encodeURI(response.redirect);
			return;
		}
		else {
			var msg = response.error_messages;
			if (Object.isArray(msg)) {
				msg = msg.join("\n").stripTags().toString();
			}
			if (msg) {
				alert(msg);
			}
		}
		
		$j('#loading-mask').hide();
	});
  }
}, 1000);
	function isMobile() {
		  if (/Mobi|Tablet|iPad|iPhone/.test(navigator.userAgent)) {
			return true;
		  }else{
			return false;
		  }
		}
	//]]>

	</script>
	                </div>
            </div>
        </div>
                <div class="footer-cgv-container">
    <div class="footer">
		<div class="footer-brand-slide">
<div class="sect-smuse">
<ul>
<li><a class="dx" href="https://www.cgv.vn/default/theaters/special/4dx">4DX</a></li>
<li><a class="imax" href="https://www.cgv.vn/default/theaters/special/imax">Imax</a></li>
<li><a class="starium" href="https://www.cgv.vn/default/theaters/special/starium">Starium</a></li>
<li><a class="gold-class" href="https://www.cgv.vn/default/theaters/special/gold-class">Goldclass</a></li>
<li><a class="lamour" href="https://www.cgv.vn/default/theaters/special/lamour">L'amour</a></li>
<li><a class="sweet" href="https://www.cgv.vn/default/theaters/special/sweetbox">Sweetbox</a></li>
<li><a class="premium-cinema" href="https://www.cgv.vn/default/theaters/special/premium">Premium Cinema</a></li>
<li><a class="screenx" href="https://www.cgv.vn/default/theaters/special/screenx">Screenx</a></li>
<li><a class="cine-foret" href="https://www.cgv.vn/default/theaters/special/cine-foret">Cine &amp; Foret</a></li>
<li><a class="cine-livingroom" href="https://www.cgv.vn/default/theaters/special/cine-living">Cine &amp; Living Room</a></li>
<li><a class="cine-suite" href="https://www.cgv.vn/default/theaters/special/cine-suite">Cine Suite</a></li>
</ul>
</div>
</div>        <div class="footer-cgv-policy">
<div class="content-cgv-policy">
<div class="cgv-vietnam">
<h3>CGV Việt Nam</h3>
<ul>
<li><a href="https://www.cgv.vn/default/about-cgv/">Giới Thiệu</a></li>
<li><a href="https://www.cgv.vn/default/cgv-online/">Tiện &Iacute;ch Online</a></li>
<li><a href="https://www.cgv.vn/default/gift/">Thẻ Qu&agrave; Tặng</a></li>
<li><a href="https://www.cgv.vn/default/careers/">Tuyển Dụng</a></li>
<li><a href="https://www.cgv.vn/default/contacts/">Li&ecirc;n Hệ Quảng C&aacute;o CGV</a></li>
<li><a href="https://www.cgv.vn/default/danh-cho-doi-tac/">D&agrave;nh cho đối t&aacute;c</a></li>
</ul>
</div>
<div class="cgv-policy">
<h3>Điều khoản sử dụng</h3>
<ul>
<li><a href="https://www.cgv.vn/default/terms-conditions/">Điều Khoản Chung</a></li>
<li><a href="https://www.cgv.vn/default/terms-use/">Điều Khoản Giao Dịch</a></li>
<li><a href="https://www.cgv.vn/default/payment-policy/">Ch&iacute;nh S&aacute;ch Thanh To&aacute;n</a></li>
<li><a href="https://www.cgv.vn/default/privacy-policy/">Ch&iacute;nh S&aacute;ch Bảo Mật</a></li>
<li><a href="https://www.cgv.vn/default/faq/">C&acirc;u Hỏi Thường Gặp</a></li>
</ul>
</div>
<div class="cgv-follow-us">
<h3>Kết nối với ch&uacute;ng t&ocirc;i</h3>
<ul>
<li><a class="follow-fb" href="https://www.facebook.com/cgvcinemavietnam" target="_blank"></a></li>
<li><a class="follow-yt" href="https://www.youtube.com/cgvvietnam" target="_blank"></a></li>
<li><a class="follow-instagram" href="http://instagram.com/cgvcinemasvietnam" target="_blank"></a></li>
<li><a class="follow-zalo" href="http://zalo.me/1884424922722396289" target="_blank"></a></li>
</ul>
<div class="cgv-permision">
<h2><a href="http://online.gov.vn/HomePage/CustomWebsiteDisplay.aspx?DocId=30278" target="_blank">cgv</a></h2>
</div>
</div>
<div class="customer-cgv">
<h3>Chăm s&oacute;c kh&aacute;ch h&agrave;ng</h3>
<p style="line-height: 22px;">Hotline: 1900 6017<br />Giờ l&agrave;m việc: 8:00 - 22:00 (Tất cả c&aacute;c ng&agrave;y bao gồm cả Lễ Tết)<br />Email hỗ trợ: <a href="mailto:hoidap@cgv.vn">hoidap@cgv.vn</a></p>
</div>
</div>
</div>		<div class="footer-cgv-address">
<div class="cgv-address-content">
<div class="logo-footer-cgv">&nbsp;</div>
<div class="text-cgv-address">
<h3>C&Ocirc;NG TY TNHH CJ CGV VIỆT NAM</h3>
<p>Giấy Chứng nhận đăng k&yacute; doanh nghiệp: 0303675393 đăng k&yacute; lần đầu ng&agrave;y 31/7/2008, được cấp bởi Sở Kế hoạch v&agrave; Đầu tư Th&agrave;nh phố Hồ Ch&iacute; Minh</p>
<p>Địa chỉ: Lầu 2, số 7/28, Đường Th&agrave;nh Th&aacute;i, Phường 14, Quận 10, Th&agrave;nh phố Hồ Ch&iacute; Minh, Việt Nam</p>
<p>Đường d&acirc;y n&oacute;ng (Hotline): 1900 6017</p>
<p>COPYRIGHT 2017 CJ CGV VIETNAM CO., LTD. ALL RIGHTS RESERVED</p>
</div>
</div>
</div>    </div>
</div>

<!-- Facebook Pixel Code -->
                

<div id="wishlist_edit_action_container"></div>
    </div>
</div>
</body>
</html>

